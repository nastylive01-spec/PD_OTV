<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—á–µ—Ç–∞ –ó–ü </title>
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #059669;
            --danger: #dc2626;
            --warning: #d97706;
            --success: #10b981;
            --dark: #1e293b;
            --light: #f8fafc;
            --border: #e2e8f0;
            --gray: #64748b;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f1f5f9;
            color: var(--dark);
            line-height: 1.5;
        }
        
        .app-container {
            display: flex;
            min-height: 100vh;
        }
        
        /* ========== SIDEBAR ========== */
        .sidebar {
            width: 260px;
            background: white;
            border-right: 1px solid var(--border);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }
        
        /* ========== SIDEBAR ROLE SWITCHER ========== */
        .role-switcher-sidebar {
            display: flex;
            gap: 4px;
            padding: 16px 12px 0;
            margin-bottom: 12px;
        }
        
        .role-btn-sidebar {
            flex: 1;
            padding: 8px 4px;
            border: none;
            background: #f1f5f9;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            font-size: 0.8rem;
            transition: all 0.2s;
            text-align: center;
        }
        
        .role-btn-sidebar.active {
            background: var(--primary);
            color: white;
        }
        
        .user-card {
            padding: 24px 20px;
            border-bottom: 1px solid var(--border);
        }
        
        .user-avatar {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            font-weight: bold;
            margin-bottom: 12px;
        }
        
        .nav-menu {
            list-style: none;
            padding: 16px 12px;
        }
        
        .nav-item {
            margin-bottom: 4px;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            color: var(--dark);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.2s;
            font-weight: 500;
        }
        
        .nav-link:hover {
            background: var(--light);
        }
        
        .nav-link.active {
            background: var(--primary);
            color: white;
        }
        
        .nav-icon {
            margin-right: 12px;
            font-size: 1.1rem;
        }
        
        /* ========== MAIN CONTENT ========== */
        .main-content {
            flex: 1;
            margin-left: 260px;
            padding: 24px 32px;
            max-width: calc(100% - 260px);
        }
        
        /* ========== HEADER ========== */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border);
        }
        
        .header-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
        }
        
        .role-switcher {
            display: flex;
            gap: 4px;
            background: white;
            padding: 4px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }
        
        .role-btn {
            padding: 8px 16px;
            border: none;
            background: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            font-size: 0.9rem;
            transition: all 0.2s;
        }
        
        .role-btn.active {
            background: var(--primary);
            color: white;
        }
        
        /* ========== COMMON COMPONENTS ========== */
        .section-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .section-subtitle {
            color: var(--gray);
            margin-bottom: 20px;
            font-size: 0.95rem;
        }
        
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 16px;
            margin: 20px 0;
        }
        
        .kpi-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        
        .kpi-value {
            font-size: 1.75rem;
            font-weight: 700;
            margin: 8px 0;
            color: var(--primary);
        }
        
        .kpi-trend {
            font-size: 0.8rem;
            padding: 3px 8px;
            border-radius: 10px;
            display: inline-block;
            margin-bottom: 4px;
        }
        
        .trend-up {
            background: #dcfce7;
            color: var(--success);
        }
        
        .trend-down {
            background: #fee2e2;
            color: var(--danger);
        }
        
        .form-container {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 16px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            font-size: 0.9rem;
        }
        
        .form-input, .form-select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 0.95rem;
            transition: border-color 0.2s;
        }
        
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
        }
        
        .btn-secondary {
            background: var(--light);
            color: var(--dark);
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .data-table {
            width: 100%;
            background: white;
            border-collapse: collapse;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid var(--border);
            font-size: 0.9rem;
        }
        
        .data-table th {
            background: #f8fafc;
            padding: 14px 16px;
            text-align: left;
            font-weight: 600;
            border-bottom: 1px solid var(--border);
            color: var(--dark);
        }
        
        .data-table td {
            padding: 14px 16px;
            border-bottom: 1px solid var(--border);
        }
        
        .data-table tr:hover {
            background: #f8fafc;
        }
        
        .progress-bar {
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 3px;
        }
        
        .hidden {
            display: none !important;
        }
        
        .badge {
            padding: 3px 8px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .badge-success {
            background: #dcfce7;
            color: var(--success);
        }
        
        .badge-warning {
            background: #fef3c7;
            color: var(--warning);
        }
        
        .badge-danger {
            background: #fee2e2;
            color: var(--danger);
        }
        
        .badge-info {
            background: #dbeafe;
            color: var(--primary);
        }
        
        .action-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        /* ========== TASKS PAGE ========== */
        .tasks-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }
        
        @media (max-width: 1024px) {
            .tasks-container {
                grid-template-columns: 1fr;
            }
        }
        
        .task-card {
            background: white;
            padding: 16px;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin-bottom: 12px;
            transition: all 0.2s;
        }
        
        .task-card:hover {
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        
        .task-card.completed {
            background: #f8fafc;
            opacity: 0.8;
        }
        
        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .task-type {
            font-size: 0.85rem;
            color: var(--gray);
        }
        
        .task-time {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border);
        }
        
        .time-input {
            width: 80px;
            padding: 6px 8px;
            border: 1px solid var(--border);
            border-radius: 6px;
            text-align: center;
        }
        
        .time-unit {
            font-size: 0.85rem;
            color: var(--gray);
        }
        
        .task-history-item {
            padding: 12px;
            background: #f8fafc;
            border-radius: 8px;
            margin-bottom: 8px;
            border-left: 4px solid var(--primary);
        }
        
        .task-status {
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .status-pending {
            background: #fef3c7;
            color: var(--warning);
        }
        
        .status-in-progress {
            background: #dbeafe;
            color: var(--primary);
        }
        
        .status-completed {
            background: #dcfce7;
            color: var(--success);
        }
        
        /* ========== REFERENCE TABLE ========== */
        .reference-table {
            width: 100%;
            background: white;
            border-collapse: collapse;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid var(--border);
            font-size: 0.9rem;
        }
        
        .reference-table th {
            background: #f8fafc;
            padding: 14px 16px;
            text-align: left;
            font-weight: 600;
            border-bottom: 1px solid var(--border);
            color: var(--dark);
        }
        
        .reference-table td {
            padding: 14px 16px;
            border-bottom: 1px solid var(--border);
        }
        
        .reference-table tr:hover {
            background: #f8fafc;
        }
        
        .tariff-type-badge {
            padding: 3px 8px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 500;
            background: #e0f2fe;
            color: var(--primary);
        }
        
        /* ========== TARIFF MODAL ========== */
        .tariff-modal-content {
            background: white;
            padding: 24px;
            border-radius: 12px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .tariff-category-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 8px;
            margin-bottom: 20px;
        }
        
        .tariff-category-btn {
            padding: 10px;
            border: 1px solid var(--border);
            background: white;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
            font-size: 0.9rem;
        }
        
        .tariff-category-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        /* ========== EMPLOYEE PAGES ========== */
        .salary-results {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        
        .kpi-input-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 1fr;
            gap: 12px;
            align-items: center;
            padding: 12px;
            border-bottom: 1px solid var(--border);
        }
        
        /* ========== MY KPI PAGE ========== */
        .kpi-detail-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            border: 1px solid var(--border);
            margin-bottom: 12px;
        }
        
        .kpi-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .kpi-performance {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .performance-indicator {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.85rem;
        }
        
        .performance-excellent { background: #dcfce7; color: var(--success); }
        .performance-good { background: #fef3c7; color: var(--warning); }
        .performance-average { background: #dbeafe; color: var(--primary); }
        .performance-poor { background: #fee2e2; color: var(--danger); }
        
        /* ========== COMPARISON CHART ========== */
        .comparison-chart {
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            height: 180px;
            padding: 16px;
            background: white;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin: 16px 0;
        }
        
        /* ========== ANALYTICS ========== */
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 16px;
            margin: 20px 0;
        }
        
        /* ========== MODAL ========== */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: white;
            padding: 24px;
            border-radius: 12px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        /* ========== RESPONSIVE ========== */
        @media (max-width: 1024px) {
            .sidebar {
                width: 240px;
            }
            .main-content {
                margin-left: 240px;
                max-width: calc(100% - 240px);
            }
        }
        
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
                border-right: none;
                border-bottom: 1px solid var(--border);
            }
            .main-content {
                margin-left: 0;
                max-width: 100%;
                padding: 16px;
            }
            .kpi-grid {
                grid-template-columns: 1fr;
            }
            .kpi-input-row {
                grid-template-columns: 1fr;
                gap: 8px;
            }
            .data-table {
                font-size: 0.85rem;
            }
            .data-table th,
            .data-table td {
                padding: 10px 12px;
            }
            .role-switcher-sidebar {
                padding: 12px 8px 0;
            }
            .role-btn-sidebar {
                font-size: 0.75rem;
                padding: 6px 2px;
            }
            .tasks-container {
                grid-template-columns: 1fr;
                gap: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- ========== SIDEBAR ========== -->
        <aside class="sidebar" id="sidebar">
            <!-- Employee Sidebar -->
            <div id="employee-sidebar">
                <div class="role-switcher-sidebar">
                    <button class="role-btn-sidebar active" onclick="switchRole('employee')">–°–æ—Ç—Ä—É–¥–Ω–∏–∫</button>
                    <button class="role-btn-sidebar" onclick="switchRole('analyst')">–ê–Ω–∞–ª–∏—Ç–∏–∫</button>
                    <button class="role-btn-sidebar" onclick="switchRole('admin')">–ê–¥–º–∏–Ω</button>
                </div>
                <div class="user-card">
                    <div class="user-avatar">–ò–ò</div>
                    <h3 style="font-size: 1.1rem; margin-bottom: 4px;">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</h3>
                    <p style="color: var(--gray); font-size: 0.85rem;">–†–µ–ø–æ—Ä—Ç—ë—Ä | –ù–æ–≤–æ—Å—Ç–Ω–æ–π –æ—Ç–¥–µ–ª</p>
                </div>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a class="nav-link active" onclick="showPage('employee-salary-calc')">
                            <span class="nav-icon">üí∞</span> –†–∞—Å—á–µ—Ç –ó–ü
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" onclick="showPage('employee-my-kpi')">
                            <span class="nav-icon">üìä</span> –ú–æ–∏ KPI
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" onclick="showPage('employee-tasks')">
                            <span class="nav-icon">üìù</span> –ó–∞–¥–∞—á–∏
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" onclick="showPage('employee-comparison')">
                            <span class="nav-icon">üìà</span> –°—Ä–∞–≤–Ω–µ–Ω–∏–µ
                        </a>
                    </li>
                </ul>
            </div>
            
            <!-- Analyst Sidebar -->
            <div id="analyst-sidebar" class="hidden">
                <div class="role-switcher-sidebar">
                    <button class="role-btn-sidebar" onclick="switchRole('employee')">–°–æ—Ç—Ä—É–¥–Ω–∏–∫</button>
                    <button class="role-btn-sidebar active" onclick="switchRole('analyst')">–ê–Ω–∞–ª–∏—Ç–∏–∫</button>
                    <button class="role-btn-sidebar" onclick="switchRole('admin')">–ê–¥–º–∏–Ω</button>
                </div>
                <div class="user-card">
                    <div class="user-avatar">–§–ê</div>
                    <h3 style="font-size: 1.1rem; margin-bottom: 4px;">–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫</h3>
                    <p style="color: var(--gray); font-size: 0.85rem;">–ê–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</p>
                </div>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a class="nav-link active" onclick="showPage('analyst-efficiency')">
                            <span class="nav-icon">üìä</span> –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" onclick="showPage('analyst-forecast')">
                            <span class="nav-icon">üîÆ</span> –ü—Ä–æ–≥–Ω–æ–∑—ã
                        </a>
                    </li>
                </ul>
            </div>
            
            <!-- Admin Sidebar -->
            <div id="admin-sidebar" class="hidden">
                <div class="role-switcher-sidebar">
                    <button class="role-btn-sidebar" onclick="switchRole('employee')">–°–æ—Ç—Ä—É–¥–Ω–∏–∫</button>
                    <button class="role-btn-sidebar" onclick="switchRole('analyst')">–ê–Ω–∞–ª–∏—Ç–∏–∫</button>
                    <button class="role-btn-sidebar active" onclick="switchRole('admin')">–ê–¥–º–∏–Ω</button>
                </div>
                <div class="user-card">
                    <div class="user-avatar">–ê–î</div>
                    <h3 style="font-size: 1.1rem; margin-bottom: 4px;">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</h3>
                    <p style="color: var(--gray); font-size: 0.85rem;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π</p>
                </div>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a class="nav-link active" onclick="showPage('admin-kpi')">
                            <span class="nav-icon">‚öôÔ∏è</span> –ù–∞—Å—Ç—Ä–æ–π–∫–∞ KPI
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" onclick="showPage('admin-penalties')">
                            <span class="nav-icon">‚ö†Ô∏è</span> –®—Ç—Ä–∞—Ñ—ã
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" onclick="showPage('admin-reference')">
                            <span class="nav-icon">üìö</span> –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" onclick="showPage('admin-reports')">
                            <span class="nav-icon">üìã</span> –û—Ç—á—ë—Ç—ã
                        </a>
                    </li>
                </ul>
            </div>
        </aside>
        
        <!-- ========== MAIN CONTENT ========== -->
        <main class="main-content">
            <!-- Header -->
            <div class="header">
                <h1 class="header-title">–°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—á–µ—Ç–∞ –∑–∞—Ä–∞–±–æ—Ç–Ω–æ–π –ø–ª–∞—Ç—ã</h1>
                <div class="role-switcher">
                    <button class="role-btn active" onclick="switchRole('employee')">–°–æ—Ç—Ä—É–¥–Ω–∏–∫</button>
                    <button class="role-btn" onclick="switchRole('analyst')">–ê–Ω–∞–ª–∏—Ç–∏–∫</button>
                    <button class="role-btn" onclick="switchRole('admin')">–ê–¥–º–∏–Ω</button>
                </div>
            </div>
            
            <!-- ========== EMPLOYEE PAGES ========== -->
            
            <!-- Salary Calculator -->
            <div id="employee-salary-calc">
                <h2 class="section-title">–†–∞—Å—á—ë—Ç –∑–∞—Ä–∞–±–æ—Ç–Ω–æ–π –ø–ª–∞—Ç—ã</h2>
                <p class="section-subtitle">–Ø–Ω–≤–∞—Ä—å 2026 | –§–æ—Ä–º—É–ª–∞: –û–∫–ª–∞–¥ + –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è √ó (–í–∞—à–∏ –±–∞–ª–ª—ã / –°—Ä–µ–¥–Ω–∏–µ –ø–æ –æ—Ç–¥–µ–ª—É) - –®—Ç—Ä–∞—Ñ—ã</p>
                
                <div class="form-container">
                    <div class="form-group">
                        <label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å</label>
                        <select id="employee-role" class="form-select" onchange="loadRoleData()">
                            <option value="reporter">–†–µ–ø–æ—Ä—Ç—ë—Ä</option>
                            <option value="editor">–†–µ–¥–∞–∫—Ç–æ—Ä</option>
                            <option value="smm">SMM-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç</option>
                            <option value="production">–ü—Ä–æ–¥–∞–∫—à–Ω</option>
                        </select>
                    </div>
                </div>
                
                <!-- KPI Inputs -->
                <div class="form-container">
                    <h3 style="margin-bottom: 16px; font-size: 1.1rem;">üìä –í–≤–æ–¥ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π KPI</h3>
                    
                    <div class="kpi-input-row" style="font-weight: 600; background: #f8fafc; border-radius: 8px 8px 0 0;">
                        <div>–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å KPI</div>
                        <div>–¶–µ–ª—å</div>
                        <div>–í–µ—Å</div>
                        <div>–§–∞–∫—Ç</div>
                        <div>–ë–∞–ª–ª—ã</div>
                    </div>
                    
                    <div id="kpi-inputs-container">
                        <!-- KPI inputs will be loaded here -->
                    </div>
                    
                    <div style="margin-top: 20px; padding: 16px; background: #f0f9ff; border-radius: 8px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-size: 0.85rem; color: var(--gray);">–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª –æ—Ç–¥–µ–ª–∞:</div>
                                <div style="font-size: 1.1rem; font-weight: bold;" id="department-avg-score">102.4</div>
                            </div>
                            <div>
                                <div style="font-size: 0.85rem; color: var(--gray);">–í–∞—à–∏ –∏—Ç–æ–≥–æ–≤—ã–µ –±–∞–ª–ª—ã:</div>
                                <div style="font-size: 1.25rem; font-weight: bold; color: var(--primary);" id="total-score">0</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Calculate Button -->
                <div style="text-align: center; margin: 24px 0;">
                    <button class="btn btn-primary" onclick="calculateSalary()" style="padding: 12px 32px; font-size: 1rem;">
                        üßÆ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –º–æ—é –ó–ü
                    </button>
                </div>
                
                <!-- Results -->
                <div id="salary-results" class="hidden">
                    <div class="salary-results">
                        <h2 style="color: white; margin-bottom: 20px; font-size: 1.25rem;">üí∞ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á—ë—Ç–∞</h2>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px;">
                            <div>
                                <div style="font-size: 0.85rem; opacity: 0.9;">–û–∫–ª–∞–¥ (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)</div>
                                <div style="font-size: 1.5rem; font-weight: bold;" id="result-base">100,000 ‚ÇΩ</div>
                            </div>
                            <div>
                                <div style="font-size: 0.85rem; opacity: 0.9;">–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è —á–∞—Å—Ç—å</div>
                                <div style="font-size: 1.5rem; font-weight: bold;" id="result-variable">30,000 ‚ÇΩ</div>
                            </div>
                            <div>
                                <div style="font-size: 0.85rem; opacity: 0.9;">–ò—Ç–æ–≥–æ–≤–∞—è –ó–ü</div>
                                <div style="font-size: 1.75rem; font-weight: bold;" id="result-total">130,000 ‚ÇΩ</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Calculation Details -->
                    <div class="form-container">
                        <h3 style="margin-bottom: 12px; font-size: 1.1rem;">üìù –î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á—ë—Ç–∞</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin: 16px 0;">
                            <div>
                                <div style="font-size: 0.85rem; color: var(--gray);">–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è:</div>
                                <div style="font-size: 1.1rem; font-weight: bold; color: var(--primary);" id="result-factor">1.000</div>
                            </div>
                            <div>
                                <div style="font-size: 0.85rem; color: var(--gray);">–ù–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è:</div>
                                <div style="font-size: 1.1rem; font-weight: bold; color: var(--primary);" id="result-norm-variable">30,000 ‚ÇΩ</div>
                            </div>
                        </div>
                        <div style="background: #f8fafc; padding: 12px; border-radius: 8px; margin-top: 12px;">
                            <div style="font-size: 0.85rem; font-weight: 500; margin-bottom: 4px;">–§–æ—Ä–º—É–ª–∞:</div>
                            <div style="font-family: 'Courier New', monospace; font-size: 0.9rem;">
                                –ó–ü = –û–∫–ª–∞–¥ + (–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è √ó (–í–∞—à–∏_–±–∞–ª–ª—ã / –°—Ä–µ–¥–Ω–∏–µ_–±–∞–ª–ª—ã_–æ—Ç–¥–µ–ª–∞))
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- My KPI Page -->
            <div id="employee-my-kpi" class="hidden">
                <div class="action-bar">
                    <h2 class="section-title">–ú–æ–∏ KPI –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏</h2>
                    <div>
                        <select id="kpi-period" class="form-select" style="width: 180px;" onchange="loadMyKPI()">
                            <option value="current">–Ø–Ω–≤–∞—Ä—å 2026</option>
                            <option value="previous">–î–µ–∫–∞–±—Ä—å 2025</option>
                        </select>
                    </div>
                </div>
                <p class="section-subtitle">–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ü–µ–ª–µ–π –ø–æ –∫–∞–∂–¥–æ–º—É –ø–æ–∫–∞–∑–∞—Ç–µ–ª—é KPI</p>
                
                <!-- Overview Cards -->
                <div class="kpi-grid" id="my-kpi-overview">
                    <!-- Will be populated by JavaScript -->
                </div>
                
                <!-- Detailed Table -->
                <h3 style="margin: 24px 0 12px; font-size: 1.1rem;">üìä –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è KPI</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>KPI</th>
                            <th>–¶–µ–ª—å</th>
                            <th>–§–∞–∫—Ç</th>
                            <th>–í–µ—Å</th>
                            <th>–ë–∞–ª–ª—ã</th>
                            <th>–í–∫–ª–∞–¥</th>
                            <th>–ü—Ä–æ–≥—Ä–µ—Å—Å</th>
                        </tr>
                    </thead>
                    <tbody id="my-kpi-table">
                        <!-- Will be populated by JavaScript -->
                    </tbody>
                </table>
                
                <!-- Trends Section -->
                <div id="kpi-trends" style="margin-top: 24px;">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- Tasks Page -->
            <div id="employee-tasks" class="hidden">
                <div class="action-bar">
                    <h2 class="section-title">–£—á—ë—Ç —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏</h2>
                    <button class="btn btn-primary" onclick="showAddTaskModal()">
                        <span>‚ûï</span> –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
                    </button>
                </div>
                <p class="section-subtitle">–£—á—ë—Ç –≤—Ä–µ–º–µ–Ω–∏ –ø–æ –∑–∞–¥–∞—á–∞–º –∏ –∏—Å—Ç–æ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç</p>
                
                <!-- Statistics -->
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div style="color: var(--gray); font-size: 0.85rem;">–ó–∞–¥–∞—á –∑–∞ –º–µ—Å—è—Ü</div>
                        <div class="kpi-value" id="total-tasks">0</div>
                        <div class="kpi-trend trend-up">+2 –∑–∞ –Ω–µ–¥–µ–ª—é</div>
                        <div style="font-size: 0.85rem; color: var(--gray);">–í—Å–µ–≥–æ —á–∞—Å–æ–≤: <span id="total-hours">0</span></div>
                    </div>
                    <div class="kpi-card">
                        <div style="color: var(--gray); font-size: 0.85rem;">–í —Ä–∞–±–æ—Ç–µ</div>
                        <div class="kpi-value" id="active-tasks">0</div>
                        <div class="kpi-trend trend-up">3 –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ</div>
                        <div style="font-size: 0.85rem; color: var(--gray);">–¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏</div>
                    </div>
                    <div class="kpi-card">
                        <div style="color: var(--gray); font-size: 0.85rem;">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
                        <div class="kpi-value" id="completed-tasks">0</div>
                        <div class="kpi-trend trend-up">85% —É—Å–ø–µ—à–Ω—ã—Ö</div>
                        <div style="font-size: 0.85rem; color: var(--gray);">–ó–∞ –Ω–æ—è–±—Ä—å 2026</div>
                    </div>
                </div>
                
                <div class="tasks-container">
                    <!-- Current Tasks -->
                    <div>
                        <h3 style="margin: 24px 0 12px; font-size: 1.1rem;">üìù –¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏</h3>
                        <div id="current-tasks">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Task History -->
                    <div>
                        <h3 style="margin: 24px 0 12px; font-size: 1.1rem;">üìä –ò—Å—Ç–æ—Ä–∏—è –∑–∞–¥–∞—á</h3>
                        <div id="task-history">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
                
                <!-- Time Summary -->
                <div class="form-container" style="margin-top: 24px;">
                    <h3 style="margin-bottom: 16px; font-size: 1.1rem;">‚è±Ô∏è –°–≤–æ–¥–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏</h3>
                    <div id="time-summary">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
            </div>
            
            <!-- Comparison Page -->
            <div id="employee-comparison" class="hidden">
                <h2 class="section-title">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –æ—Ç–¥–µ–ª–æ–º</h2>
                <p class="section-subtitle">–ù–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å—Ä–µ–¥–Ω–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–æ –æ—Ç–¥–µ–ª—É</p>
                
                <!-- Overview -->
                <div class="kpi-grid" id="comparison-overview">
                    <!-- Will be populated by JavaScript -->
                </div>
                
                <!-- Department Ranking -->
                <h3 style="margin: 24px 0 12px; font-size: 1.1rem;">üèÜ –†–µ–π—Ç–∏–Ω–≥ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –æ—Ç–¥–µ–ª–∞</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>–ú–µ—Å—Ç–æ</th>
                            <th>–°–æ—Ç—Ä—É–¥–Ω–∏–∫</th>
                            <th>–ë–∞–ª–ª—ã</th>
                            <th>–ö–æ—ç—Ñ.</th>
                        </tr>
                    </thead>
                    <tbody id="ranking-table">
                        <!-- Will be populated by JavaScript -->
                    </tbody>
                </table>
                
                <!-- Chart -->
                <h3 style="margin: 24px 0 12px; font-size: 1.1rem;">üìä –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤ –≤ –æ—Ç–¥–µ–ª–µ</h3>
                <div class="comparison-chart" id="comparison-chart">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- ========== ANALYST PAGES ========== -->
            
            <!-- Department Efficiency -->
            <div id="analyst-efficiency" class="hidden">
                <div class="action-bar">
                    <h2 class="section-title">–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ç–¥–µ–ª–æ–≤</h2>
                    <select id="efficiency-period" class="form-select" style="width: 180px;" onchange="loadEfficiencyData()">
                        <option value="current">–Ø–Ω–≤–∞—Ä—å 2026</option>
                        <option value="previous">–î–µ–∫–∞–±—Ä—å 2025</option>
                        <option value="q3">Q4 2025</option>
                    </select>
                </div>
                <p class="section-subtitle">–ê–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ KPI –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ–Ω–¥–∞ –∑–∞—Ä–∞–±–æ—Ç–Ω–æ–π –ø–ª–∞—Ç—ã</p>
                
                <!-- Overview Cards -->
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div style="color: var(--gray); font-size: 0.85rem;">–û–±—â–∏–π —Ñ–æ–Ω–¥ –ó–ü</div>
                        <div class="kpi-value">3,240,000 ‚ÇΩ</div>
                        <div class="kpi-trend trend-up">+2% –∫ –ø–ª–∞–Ω—É</div>
                        <div style="font-size: 0.85rem; color: var(--gray);">24 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</div>
                    </div>
                    <div class="kpi-card">
                        <div style="color: var(--gray); font-size: 0.85rem;">–°—Ä–µ–¥–Ω—è—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</div>
                        <div class="kpi-value">87%</div>
                        <div class="kpi-trend trend-up">+2% –∫ –ø—Ä–æ—à–ª–æ–º—É –º–µ—Å—è—Ü—É</div>
                        <div style="font-size: 0.85rem; color: var(--gray);">–ü–æ –≤—Å–µ–º –æ—Ç–¥–µ–ª–∞–º</div>
                    </div>
                    <div class="kpi-card">
                        <div style="color: var(--gray); font-size: 0.85rem;">–î–æ–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —á–∞—Å—Ç–∏</div>
                        <div class="kpi-value">25%</div>
                        <div class="kpi-trend trend-up">810,000 ‚ÇΩ</div>
                        <div style="font-size: 0.85rem; color: var(--gray);">–û—Ç –æ–±—â–µ–≥–æ —Ñ–æ–Ω–¥–∞</div>
                    </div>
                </div>
                
                <!-- Efficiency Table -->
                <h3 style="margin: 24px 0 12px; font-size: 1.1rem;">üìà –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –æ—Ç–¥–µ–ª–∞–º</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>–û—Ç–¥–µ–ª</th>
                            <th>–°–æ—Ç—Ä.</th>
                            <th>–°—Ä. –±–∞–ª–ª</th>
                            <th>–§–æ–Ω–¥ –ó–ü</th>
                            <th>–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</th>
                            <th>–†–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å</th>
                        </tr>
                    </thead>
                    <tbody id="efficiency-table">
                        <!-- Will be populated by JavaScript -->
                    </tbody>
                </table>
                
                <!-- KPI Analysis -->
                <h3 style="margin: 24px 0 12px; font-size: 1.1rem;">üéØ –ê–Ω–∞–ª–∏–∑ KPI –ø–æ —Ä–æ–ª—è–º</h3>
                <div id="kpi-analysis-container">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- Forecast Page -->
            <div id="analyst-forecast" class="hidden">
                <div class="action-bar">
                    <h2 class="section-title">–ü—Ä–æ–≥–Ω–æ–∑—ã</h2>
                    <select id="forecast-period" class="form-select" style="width: 180px;" onchange="loadForecastData()">
                        <option value="next">–î–µ–∫–∞–±—Ä—å 2025</option>
                        <option value="q1">Q1 2026</option>
                        <option value="year">2026 –≥–æ–¥</option>
                    </select>
                </div>
                <p class="section-subtitle">–ü—Ä–æ–≥–Ω–æ–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ–æ–Ω–¥–∞ –∑–∞—Ä–∞–±–æ—Ç–Ω–æ–π –ø–ª–∞—Ç—ã</p>
                
                <!-- Forecast Cards -->
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div style="color: var(--gray); font-size: 0.85rem;">–ü—Ä–æ–≥–Ω–æ–∑ —Ñ–æ–Ω–¥–∞ –ó–ü</div>
                        <div class="kpi-value">3,300,000 ‚ÇΩ</div>
                        <div class="kpi-trend trend-up">+1.8%</div>
                        <div style="font-size: 0.85rem; color: var(--gray);">–ù–∞ —Ñ–µ–≤—Ä–∞–ª—å 2026</div>
                    </div>
                    <div class="kpi-card">
                        <div style="color: var(--gray); font-size: 0.85rem;">–ü—Ä–æ–≥–Ω–æ–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</div>
                        <div class="kpi-value">89%</div>
                        <div class="kpi-trend trend-up">+2%</div>
                        <div style="font-size: 0.85rem; color: var(--gray);">–†–æ—Å—Ç –∑–∞ –∫–≤–∞—Ä—Ç–∞–ª</div>
                    </div>
                    <div class="kpi-card">
                        <div style="color: var(--gray); font-size: 0.85rem;">–ü—Ä–æ–≥–Ω–æ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —á–∞—Å—Ç–∏</div>
                        <div class="kpi-value">825,000 ‚ÇΩ</div>
                        <div class="kpi-trend trend-up">25% –æ—Ç —Ñ–æ–Ω–¥–∞</div>
                        <div style="font-size: 0.85rem; color: var(--gray);">–ù–∞ —Ñ–µ–≤—Ä–∞–ª—å 2026</div>
                    </div>
                </div>
                
                <!-- Forecast Table -->
                <h3 style="margin: 24px 0 12px; font-size: 1.1rem;">üìä –ü—Ä–æ–≥–Ω–æ–∑ –ø–æ –æ—Ç–¥–µ–ª–∞–º</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>–û—Ç–¥–µ–ª</th>
                            <th>–ü—Ä–æ–≥–Ω–æ–∑ –±–∞–ª–ª–æ–≤</th>
                            <th>–ü—Ä–æ–≥–Ω–æ–∑ —ç—Ñ—Ñ.</th>
                            <th>–ü—Ä–æ–≥–Ω–æ–∑ —Ñ–æ–Ω–¥–∞</th>
                            <th>–¢—Ä–µ–Ω–¥</th>
                        </tr>
                    </thead>
                    <tbody id="forecast-table">
                        <!-- Will be populated by JavaScript -->
                    </tbody>
                </table>
                
                <!-- Recommendations -->
                <div class="form-container" style="margin-top: 24px;">
                    <h3 style="margin-bottom: 12px; font-size: 1.1rem;">üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px;">
                        <div style="padding: 12px; background: #f0f9ff; border-radius: 8px;">
                            <div style="font-weight: 500; color: var(--primary); margin-bottom: 4px;">
                                ‚úÖ –ù–æ–≤–æ—Å—Ç–Ω–æ–π –æ—Ç–¥–µ–ª
                            </div>
                            <div style="font-size: 0.85rem; color: var(--gray);">
                                –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É–≤–µ–ª–∏—á–∏—Ç—å —Ü–µ–ª–∏ KPI –Ω–∞ 5% –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –º–æ—Ç–∏–≤–∞—Ü–∏–∏
                            </div>
                        </div>
                        <div style="padding: 12px; background: #fef3c7; border-radius: 8px;">
                            <div style="font-weight: 500; color: var(--warning); margin-bottom: 4px;">
                                ‚ö†Ô∏è –ü—Ä–æ–¥–∞–∫—à–Ω
                            </div>
                            <div style="font-size: 0.85rem; color: var(--gray);">
                                –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±—É—á–µ–Ω–∏–µ –ø–æ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—é –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —Å—Ü–µ–Ω
                            </div>
                        </div>
                        <div style="padding: 12px; background: #dcfce7; border-radius: 8px;">
                            <div style="font-weight: 500; color: var(--success); margin-bottom: 4px;">
                                üìà SMM
                            </div>
                            <div style="font-size: 0.85rem; color: var(--gray);">
                                –í—ã—Å–æ–∫–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —á–∞—Å—Ç—å –Ω–∞ 3%
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ========== ADMIN PAGES ========== -->
            
            <!-- KPI Management -->
            <div id="admin-kpi" class="hidden">
                <div class="action-bar">
                    <h2 class="section-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ KPI</h2>
                    <button class="btn btn-primary" onclick="showAddKPIModal()">
                        <span>‚ûï</span> –î–æ–±–∞–≤–∏—Ç—å KPI
                    </button>
                </div>
                <p class="section-subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ —Ä–æ–ª—è–º</p>
                
                <!-- Role Tabs -->
                <div style="display: flex; gap: 8px; margin-bottom: 20px; flex-wrap: wrap;">
                    <button class="btn btn-secondary active" onclick="selectRoleForAdmin('reporter')">–†–µ–ø–æ—Ä—Ç—ë—Ä</button>
                    <button class="btn btn-secondary" onclick="selectRoleForAdmin('editor')">–†–µ–¥–∞–∫—Ç–æ—Ä</button>
                    <button class="btn btn-secondary" onclick="selectRoleForAdmin('smm')">SMM</button>
                    <button class="btn btn-secondary" onclick="selectRoleForAdmin('production')">–ü—Ä–æ–¥–∞–∫—à–Ω</button>
                </div>
                
                <!-- KPI Table -->
                <h3 style="margin: 24px 0 12px; font-size: 1.1rem;">üìã KPI –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ä–æ–ª–∏</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>KPI</th>
                            <th>–¶–µ–ª—å</th>
                            <th>–í–µ—Å</th>
                            <th>–§–æ—Ä–º—É–ª–∞</th>
                            <th>–ú–∞–∫—Å. –±–∞–ª–ª—ã</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="admin-kpi-table">
                        <!-- Will be populated by JavaScript -->
                    </tbody>
                </table>
                
                <!-- Salary Settings -->
                <div class="form-container" style="margin-top: 24px;">
                    <h3 style="margin-bottom: 16px; font-size: 1.1rem;">üí∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ó–ü –¥–ª—è —Ä–æ–ª–∏</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
                        <div class="form-group">
                            <label class="form-label">–û–∫–ª–∞–¥ (‚ÇΩ)</label>
                            <input type="number" class="form-input" id="admin-base-salary" value="100000" min="50000" max="300000">
                        </div>
                        <div class="form-group">
                            <label class="form-label">–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è —á–∞—Å—Ç—å (‚ÇΩ)</label>
                            <input type="number" class="form-input" id="admin-variable-salary" value="30000" min="10000" max="100000">
                        </div>
                        <div class="form-group">
                            <label class="form-label">–ú–∞–∫—Å. —à—Ç—Ä–∞—Ñ (%)</label>
                            <input type="number" class="form-input" id="admin-max-penalty" value="30" min="0" max="100">
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn btn-success" onclick="saveSalarySettings()">
                            üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Penalties Management -->
            <div id="admin-penalties" class="hidden">
                <div class="action-bar">
                    <h2 class="section-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à—Ç—Ä–∞—Ñ–∞–º–∏</h2>
                    <button class="btn btn-primary" onclick="showAddPenaltyModal()">
                        <span>‚ûï</span> –î–æ–±–∞–≤–∏—Ç—å —à—Ç—Ä–∞—Ñ
                    </button>
                </div>
                <p class="section-subtitle">–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à—Ç—Ä–∞—Ñ–∞–º–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º</p>
                
                <!-- Statistics -->
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div style="color: var(--gray); font-size: 0.85rem;">–í—Å–µ–≥–æ —à—Ç—Ä–∞—Ñ–æ–≤</div>
                        <div class="kpi-value" id="total-penalties">0</div>
                        <div style="font-size: 0.85rem; color: var(--gray);">–ó–∞ —è–Ω–≤–∞—Ä—å 2026</div>
                    </div>
                    <div class="kpi-card">
                        <div style="color: var(--gray); font-size: 0.85rem;">–°—É–º–º–∞ —à—Ç—Ä–∞—Ñ–æ–≤</div>
                        <div class="kpi-value" id="total-penalties-amount">0 ‚ÇΩ</div>
                        <div style="font-size: 0.85rem; color: var(--gray);">30% –æ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π</div>
                    </div>
                </div>
                
                <!-- Penalties Table -->
                <h3 style="margin: 24px 0 12px; font-size: 1.1rem;">‚ö†Ô∏è –ê–∫—Ç–∏–≤–Ω—ã–µ —à—Ç—Ä–∞—Ñ—ã</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>–°–æ—Ç—Ä—É–¥–Ω–∏–∫</th>
                            <th>–†–æ–ª—å</th>
                            <th>–¢–∏–ø —à—Ç—Ä–∞—Ñ–∞</th>
                            <th>–°—É–º–º–∞</th>
                            <th>–î–∞—Ç–∞</th>
                            <th>–ü—Ä–∏—á–∏–Ω–∞</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="penalties-table">
                        <!-- Will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <!-- Reference Page -->
            <div id="admin-reference" class="hidden">
                <div class="action-bar">
                    <h2 class="section-title">–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏</h2>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-primary" onclick="showAddTariffModal()">
                            <span>‚ûï</span> –î–æ–±–∞–≤–∏—Ç—å —Ç–∞—Ä–∏—Ñ
                        </button>
                        <button class="btn btn-secondary" onclick="showAddEmployeeModal()">
                            <span>üë§</span> –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
                        </button>
                    </div>
                </div>
                <p class="section-subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π: —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏, —Ç–∏–ø—ã —Ä–∞–±–æ—Ç, —Ç–∞—Ä–∏—Ñ—ã</p>
                
                <!-- Statistics -->
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div style="color: var(--gray); font-size: 0.85rem;">–í—Å–µ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</div>
                        <div class="kpi-value" id="total-employees">24</div>
                        <div style="font-size: 0.85rem; color: var(--gray);">–í —Å–∏—Å—Ç–µ–º–µ</div>
                    </div>
                    <div class="kpi-card">
                        <div style="color: var(--gray); font-size: 0.85rem;">–¢–∏–ø–æ–≤ —Ä–∞–±–æ—Ç</div>
                        <div class="kpi-value" id="total-work-types">18</div>
                        <div style="font-size: 0.85rem; color: var(--gray);">–¢–∞—Ä–∏—Ñ–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π</div>
                    </div>
                    <div class="kpi-card">
                        <div style="color: var(--gray); font-size: 0.85rem;">–°—Ä–µ–¥–Ω–∏–π —Ç–∞—Ä–∏—Ñ</div>
                        <div class="kpi-value" id="avg-tariff">1,450 ‚ÇΩ</div>
                        <div style="font-size: 0.85rem; color: var(--gray);">–ó–∞ —Ä–∞–±–æ—Ç—É</div>
                    </div>
                </div>
                
                <!-- Tab Navigation -->
                <div style="display: flex; gap: 8px; margin: 24px 0 16px; flex-wrap: wrap;">
                    <button class="btn btn-secondary active" onclick="showReferenceTab('tariffs')">–¢–∞—Ä–∏—Ñ—ã —Ä–∞–±–æ—Ç</button>
                    <button class="btn btn-secondary" onclick="showReferenceTab('employees')">–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</button>
                    <button class="btn btn-secondary" onclick="showReferenceTab('products')">–¢–∏–ø—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤</button>
                </div>
                
                <!-- Tariffs Table -->
                <div id="tariffs-tab">
                    <h3 style="margin: 16px 0 12px; font-size: 1.1rem;">üí∞ –¢–∞—Ä–∏—Ñ—ã —Ä–∞–±–æ—Ç/—É—Å–ª—É–≥</h3>
                    <table class="reference-table">
                        <thead>
                            <tr>
                                <th>–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç/—É—Å–ª—É–≥</th>
                                <th>–¢–∏–ø</th>
                                <th>–£—Ä–æ–≤–µ–Ω—å</th>
                                <th>–¢–∞—Ä–∏—Ñ, —Ä—É–±</th>
                                <th>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="tariffs-table">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Employees Table -->
                <div id="employees-tab" class="hidden">
                    <h3 style="margin: 16px 0 12px; font-size: 1.1rem;">üë• –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</h3>
                    <table class="reference-table">
                        <thead>
                            <tr>
                                <th>–§–ò–û</th>
                                <th>–î–æ–ª–∂–Ω–æ—Å—Ç—å</th>
                                <th>–û—Ç–¥–µ–ª</th>
                                <th>–î–∞—Ç–∞ –ø—Ä–∏—ë–º–∞</th>
                                <th>–û–∫–ª–∞–¥</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="employees-table">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Products Table -->
                <div id="products-tab" class="hidden">
                    <h3 style="margin: 16px 0 12px; font-size: 1.1rem;">üì¶ –¢–∏–ø—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤</h3>
                    <table class="reference-table">
                        <thead>
                            <tr>
                                <th>–¢–∏–ø –ø—Ä–æ–¥—É–∫—Ç–∞</th>
                                <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                                <th>–°–ª–æ–∂–Ω–æ—Å—Ç—å</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="products-table">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Reports Page -->
            <div id="admin-reports" class="hidden">
                <div class="action-bar">
                    <h2 class="section-title">–û—Ç—á—ë—Ç—ã</h2>
                    <button class="btn btn-primary" onclick="generateReport()">
                        <span>üìä</span> –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç
                    </button>
                </div>
                <p class="section-subtitle">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤ –ø–æ –∑–∞—Ä–∞–±–æ—Ç–Ω–æ–π –ø–ª–∞—Ç–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</p>
                
                <!-- Report Types -->
                <div class="kpi-grid">
                    <div class="kpi-card" onclick="selectReportType('salary')" style="cursor: pointer;">
                        <div style="color: var(--gray); font-size: 0.85rem;">–û—Ç—á—ë—Ç –ø–æ –ó–ü</div>
                        <div class="kpi-value">üí∞</div>
                        <div style="font-size: 0.85rem; color: var(--gray);">–†–∞—Å—á—ë—Ç –∑–∞—Ä–∞–±–æ—Ç–Ω—ã—Ö –ø–ª–∞—Ç</div>
                    </div>
                    <div class="kpi-card" onclick="selectReportType('kpi')" style="cursor: pointer;">
                        <div style="color: var(--gray); font-size: 0.85rem;">–û—Ç—á—ë—Ç –ø–æ KPI</div>
                        <div class="kpi-value">üìà</div>
                        <div style="font-size: 0.85rem; color: var(--gray);">–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</div>
                    </div>
                    <div class="kpi-card" onclick="selectReportType('department')" style="cursor: pointer;">
                        <div style="color: var(--gray); font-size: 0.85rem;">–û—Ç—á—ë—Ç –ø–æ –æ—Ç–¥–µ–ª–∞–º</div>
                        <div class="kpi-value">üè¢</div>
                        <div style="font-size: 0.85rem; color: var(--gray);">–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ç–¥–µ–ª–æ–≤</div>
                    </div>
                </div>
                
                <!-- Report Configuration -->
                <div class="form-container" style="margin-top: 20px;">
                    <h3 style="margin-bottom: 16px; font-size: 1.1rem;">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç—á—ë—Ç–∞</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
                        <div class="form-group">
                            <label class="form-label">–ü–µ—Ä–∏–æ–¥</label>
                            <select class="form-select" id="report-period">
                                <option value="month">–Ø–Ω–≤–∞—Ä—å 2026</option>
                                <option value="quarter">Q4 2025</option>
                                <option value="year">2026 –≥–æ–¥</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–§–æ—Ä–º–∞—Ç</label>
                            <select class="form-select" id="report-format">
                                <option value="excel">Excel</option>
                                <option value="pdf">PDF</option>
                                <option value="html">HTML</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- ========== MODALS ========== -->
    
    <!-- Add KPI Modal -->
    <div id="add-kpi-modal" class="modal hidden">
        <div class="modal-content">
            <h2 style="margin-bottom: 16px; font-size: 1.25rem;">‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ KPI</h2>
            
            <div class="form-group">
                <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ KPI</label>
                <input type="text" class="form-input" id="new-kpi-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—É–±–ª–∏–∫–∞—Ü–∏–π">
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                <div class="form-group">
                    <label class="form-label">–¶–µ–ª—å</label>
                    <input type="number" class="form-input" id="new-kpi-target" placeholder="100">
                </div>
                <div class="form-group">
                    <label class="form-label">–í–µ—Å (%)</label>
                    <input type="number" class="form-input" id="new-kpi-weight" placeholder="20" min="1" max="100">
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è</label>
                <input type="text" class="form-input" id="new-kpi-unit" placeholder="—à—Ç./–º–µ—Å., %, —á">
            </div>
            
            <div class="form-group">
                <label class="form-label">–§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞</label>
                <select class="form-select" id="new-kpi-formula">
                    <option value="simple">(–§–∞–∫—Ç / –¶–µ–ª—å) √ó 100</option>
                    <option value="reverse">(–¶–µ–ª—å / –§–∞–∫—Ç) √ó 100</option>
                    <option value="percent">–§–∞–∫—Ç (%)</option>
                </select>
            </div>
            
            <div style="text-align: center; margin-top: 24px;">
                <button class="btn btn-success" onclick="saveNewKPI()">
                    üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å KPI
                </button>
                <button class="btn btn-secondary" onclick="closeModal('add-kpi-modal')" style="margin-left: 12px;">
                    ‚ùå –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </div>
    </div>
    
    <!-- Add Penalty Modal -->
    <div id="add-penalty-modal" class="modal hidden">
        <div class="modal-content">
            <h2 style="margin-bottom: 16px; font-size: 1.25rem;">‚ö†Ô∏è –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —à—Ç—Ä–∞—Ñ–∞</h2>
            
            <div class="form-group">
                <label class="form-label">–°–æ—Ç—Ä—É–¥–Ω–∏–∫</label>
                <select class="form-select" id="penalty-employee">
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</option>
                    <option value="1">–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω (–†–µ–ø–æ—Ä—Ç—ë—Ä)</option>
                    <option value="2">–ü–µ—Ç—Ä–æ–≤–∞ –ê–Ω–Ω–∞ (SMM)</option>
                    <option value="3">–°–∏–¥–æ—Ä–æ–≤ –ü–µ—Ç—Ä (–†–µ–¥–∞–∫—Ç–æ—Ä)</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="form-label">–¢–∏–ø —à—Ç—Ä–∞—Ñ–∞</label>
                <select class="form-select" id="penalty-type">
                    <option value="error">–û—à–∏–±–∫–∞ –≤ –º–∞—Ç–µ—Ä–∏–∞–ª–µ</option>
                    <option value="deadline">–ü—Ä–æ—Å—Ä–æ—á–∫–∞ –¥–µ–¥–ª–∞–π–Ω–∞</option>
                    <option value="absence">–ù–µ—É–≤–∞–∂–∏—Ç–µ–ª—å–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ</option>
                    <option value="quality">–ù–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—Ç—ã</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="form-label">–°—É–º–º–∞ —à—Ç—Ä–∞—Ñ–∞ (‚ÇΩ)</label>
                <input type="number" class="form-input" id="penalty-amount" placeholder="1000" min="500" max="5000">
            </div>
            
            <div class="form-group">
                <label class="form-label">–ü—Ä–∏—á–∏–Ω–∞</label>
                <textarea class="form-input" id="penalty-reason" rows="3" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏—á–∏–Ω—ã —à—Ç—Ä–∞—Ñ–∞..."></textarea>
            </div>
            
            <div style="text-align: center; margin-top: 24px;">
                <button class="btn btn-success" onclick="saveNewPenalty()">
                    üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —à—Ç—Ä–∞—Ñ
                </button>
                <button class="btn btn-secondary" onclick="closeModal('add-penalty-modal')" style="margin-left: 12px;">
                    ‚ùå –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </div>
    </div>

    <!-- Add Tariff Modal -->
    <div id="add-tariff-modal" class="modal hidden">
        <div class="tariff-modal-content">
            <h2 style="margin-bottom: 16px; font-size: 1.25rem;">üí∞ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞</h2>
            
            <div class="tariff-category-selector">
                <button class="tariff-category-btn active" onclick="selectTariffCategory('text')">–¢–µ–∫—Å—Ç</button>
                <button class="tariff-category-btn" onclick="selectTariffCategory('video')">–í–∏–¥–µ–æ</button>
                <button class="tariff-category-btn" onclick="selectTariffCategory('production')">–ü—Ä–æ–¥–∞–∫—à–Ω</button>
                <button class="tariff-category-btn" onclick="selectTariffCategory('editing')">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
                <button class="tariff-category-btn" onclick="selectTariffCategory('other')">–ü—Ä–æ—á–µ–µ</button>
            </div>
            
            <div class="form-group">
                <label class="form-label">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã/—É—Å–ª—É–≥–∏</label>
                <input type="text" class="form-input" id="new-tariff-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –¢–µ–∫—Å—Ç (–Ω–∞–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≤–µ–¥—É—â–µ–≥–æ)">
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                <div class="form-group">
                    <label class="form-label">–¢–∏–ø</label>
                    <select class="form-select" id="new-tariff-type">
                        <option value="basic">–û—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞</option>
                        <option value="additional">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞</option>
                        <option value="special">–°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">–£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</label>
                    <select class="form-select" id="new-tariff-level">
                        <option value="1">–£—Ä–æ–≤–µ–Ω—å 1</option>
                        <option value="2">–£—Ä–æ–≤–µ–Ω—å 2</option>
                        <option value="3">–£—Ä–æ–≤–µ–Ω—å 3</option>
                        <option value="4">–£—Ä–æ–≤–µ–Ω—å 4</option>
                        <option value="5">–£—Ä–æ–≤–µ–Ω—å 5</option>
                    </select>
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                <div class="form-group">
                    <label class="form-label">–¢–∞—Ä–∏—Ñ (—Ä—É–±)</label>
                    <input type="number" class="form-input" id="new-tariff-rate" placeholder="700" min="0" max="100000">
                </div>
                <div class="form-group">
                    <label class="form-label">–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è</label>
                    <select class="form-select" id="new-tariff-unit">
                        <option value="piece">—à—Ç.</option>
                        <option value="hour">—á–∞—Å</option>
                        <option value="minute">–º–∏–Ω—É—Ç–∞</option>
                        <option value="day">–¥–µ–Ω—å</option>
                    </select>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ</label>
                <textarea class="form-input" id="new-tariff-note" rows="2" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è..."></textarea>
            </div>
            
            <div style="text-align: center; margin-top: 24px;">
                <button class="btn btn-success" onclick="saveNewTariff()">
                    üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–∞—Ä–∏—Ñ
                </button>
                <button class="btn btn-secondary" onclick="closeModal('add-tariff-modal')" style="margin-left: 12px;">
                    ‚ùå –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </div>
    </div>
    
    <!-- Add Employee Modal -->
    <div id="add-employee-modal" class="modal hidden">
        <div class="modal-content">
            <h2 style="margin-bottom: 16px; font-size: 1.25rem;">üë§ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</h2>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                <div class="form-group">
                    <label class="form-label">–§–∞–º–∏–ª–∏—è</label>
                    <input type="text" class="form-input" id="new-employee-lastname" placeholder="–ò–≤–∞–Ω–æ–≤">
                </div>
                <div class="form-group">
                    <label class="form-label">–ò–º—è</label>
                    <input type="text" class="form-input" id="new-employee-firstname" placeholder="–ò–≤–∞–Ω">
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">–û—Ç–¥–µ–ª</label>
                <select class="form-select" id="new-employee-department">
                    <option value="news">–ù–æ–≤–æ—Å—Ç–Ω–æ–π –æ—Ç–¥–µ–ª</option>
                    <option value="production">–ü—Ä–æ–¥–∞–∫—à–Ω</option>
                    <option value="editing">–†–µ–¥–∞–∫—Ü–∏—è</option>
                    <option value="creative">–¢–≤–æ—Ä—á–µ—Å–∫–∏–π –æ—Ç–¥–µ–ª</option>
                    <option value="smm">SMM</option>
                </select>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                <div class="form-group">
                    <label class="form-label">–î–æ–ª–∂–Ω–æ—Å—Ç—å</label>
                    <select class="form-select" id="new-employee-position">
                        <option value="reporter">–†–µ–ø–æ—Ä—Ç—ë—Ä</option>
                        <option value="editor">–†–µ–¥–∞–∫—Ç–æ—Ä</option>
                        <option value="smm">SMM-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç</option>
                        <option value="producer">–ü—Ä–æ–¥–∞–∫—à–Ω</option>
                        <option value="cameraman">–û–ø–µ—Ä–∞—Ç–æ—Ä</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">–î–∞—Ç–∞ –ø—Ä–∏—ë–º–∞</label>
                    <input type="date" class="form-input" id="new-employee-hiredate">
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                <div class="form-group">
                    <label class="form-label">–û–∫–ª–∞–¥ (‚ÇΩ)</label>
                    <input type="number" class="form-input" id="new-employee-salary" placeholder="100000">
                </div>
                <div class="form-group">
                    <label class="form-label">–°—Ç–∞–≤–∫–∞</label>
                    <select class="form-select" id="new-employee-rate">
                        <option value="full">–ü–æ–ª–Ω–∞—è</option>
                        <option value="part">–ß–∞—Å—Ç–∏—á–Ω–∞—è</option>
                        <option value="hourly">–ü–æ—á–∞—Å–æ–≤–∞—è</option>
                    </select>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 24px;">
                <button class="btn btn-success" onclick="saveNewEmployee()">
                    üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
                </button>
                <button class="btn btn-secondary" onclick="closeModal('add-employee-modal')" style="margin-left: 12px;">
                    ‚ùå –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </div>
    </div>

    <!-- Add Task Modal -->
    <div id="add-task-modal" class="modal hidden">
        <div class="modal-content">
            <h2 style="margin-bottom: 16px; font-size: 1.25rem;">üìù –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏</h2>
            
            <div class="form-group">
                <label class="form-label">–¢–∏–ø –∑–∞–¥–∞—á–∏</label>
                <select class="form-select" id="new-task-type" onchange="updateTaskType()">
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∑–∞–¥–∞—á–∏</option>
                    <option value="text_writing">–¢–µ–∫—Å—Ç (–Ω–∞–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≤–µ–¥—É—â–µ–≥–æ)</option>
                    <option value="special_story">–°—é–∂–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ</option>
                    <option value="review">–û–±–∑–æ—Ä –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</option>
                    <option value="studio_text">–†–∞–±–æ—Ç–∞ –≤ –∫–∞–¥—Ä–µ ‚Äì —Ç–µ–∫—Å—Ç –≤ —Å—Ç—É–¥–∏–∏</option>
                    <option value="field_text">–†–∞–±–æ—Ç–∞ –≤ –∫–∞–¥—Ä–µ ‚Äì —Ç–µ–∫—Å—Ç –Ω–∞ –≤—ã–µ–∑–¥–µ</option>
                    <option value="interview">–†–∞–±–æ—Ç–∞ –≤ –∫–∞–¥—Ä–µ ‚Äì –∏–Ω—Ç–µ—Ä–≤—å—é</option>
                    <option value="conversation">–†–∞–±–æ—Ç–∞ –≤ –∫–∞–¥—Ä–µ ‚Äì –±–µ—Å–µ–¥–∞</option>
                    <option value="role_playing">–†–∞–±–æ—Ç–∞ –≤ –∫–∞–¥—Ä–µ ‚Äì ¬´–∏—Å–ø—ã—Ç–∞–Ω–æ –Ω–∞ —Å–µ–±–µ¬ª, —Ä–æ–ª—å</option>
                    <option value="blitz_interview">–ó–∞–ø–∏—Å—å –±–ª–∏—Ü-–æ–ø—Ä–æ—Å–∞, –∏–Ω—Ç–µ—Ä–≤—å—é –∑–∞ –∫–∞–¥—Ä–æ–º</option>
                    <option value="subtitles">–ò–Ω—Ñ–æ—Ç–∏—Ç—Ä—ã, —Å—É–±—Ç–∏—Ç—Ä—ã</option>
                    <option value="infographics">–ò–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞ —Å–ª–æ–∂–Ω–∞—è</option>
                    <option value="additional_materials">–î–æ–ø. –º–∞—Ç–µ—Ä–∏–∞–ª—ã</option>
                    <option value="special_shooting">–í–∏–¥–µ–æ ‚Äì —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Å—ä—ë–º–∫–∞</option>
                    <option value="voiceover_text">–ó–∞–∫–∞–¥—Ä–æ–≤—ã–π —Ç–µ–∫—Å—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏–µ</option>
                    <option value="interview_questions">–í–æ–ø—Ä–æ—Å—ã –¥–ª—è –∏–Ω—Ç–µ—Ä–≤—å—é - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞</option>
                    <option value="script">–°—Ü–µ–Ω–∞—Ä–∏–π</option>
                    <option value="producing">–ü—Ä–æ–¥—é—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—ä—ë–º–∫–∏</option>
                    <option value="complex_producing">–°–ª–æ–∂–Ω–æ–µ –ø—Ä–æ–¥—é—Å–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ä–µ–∂–∏—Å—Å—É—Ä–∞</option>
                    <option value="editing_short">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—Å–Ω—è—Ç–æ–≥–æ –¥–æ 3 –º–∏–Ω</option>
                    <option value="editing_long">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—Å–Ω—è—Ç–æ–≥–æ –±–æ–ª—å—à–µ 3 –º–∏–Ω</option>
                    <option value="business_trip">–°–ø–µ—Ü–ø–æ–µ–∑–¥–∫–∏ (–∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫–∏)</option>
                    <option value="live_broadcast">–ü—Ä—è–º–æ–π —ç—Ñ–∏—Ä</option>
                    <option value="narration">–ù–∞—á–∏—Ç—ã–≤–∞–Ω–∏–µ</option>
                    <option value="announcement">–ê–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ</option>
                    <option value="other">–î—Ä—É–≥–∞—è –∑–∞–¥–∞—á–∞</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</label>
                <input type="text" class="form-input" id="new-task-title" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏">
            </div>
            
            <div class="form-group">
                <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea class="form-input" id="new-task-description" rows="3" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏..."></textarea>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                <div class="form-group">
                    <label class="form-label">–ü–ª–∞–Ω–∏—Ä—É–µ–º–æ–µ –≤—Ä–µ–º—è (—á–∞—Å–æ–≤)</label>
                    <input type="number" class="form-input" id="new-task-estimated" placeholder="2" min="0.5" max="24" step="0.5">
                </div>
                <div class="form-group">
                    <label class="form-label">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                    <select class="form-select" id="new-task-priority">
                        <option value="low">–ù–∏–∑–∫–∏–π</option>
                        <option value="medium" selected>–°—Ä–µ–¥–Ω–∏–π</option>
                        <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                        <option value="urgent">–°—Ä–æ—á–Ω—ã–π</option>
                    </select>
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                <div class="form-group">
                    <label class="form-label">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</label>
                    <input type="date" class="form-input" id="new-task-start-date">
                </div>
                <div class="form-group">
                    <label class="form-label">–î–µ–¥–ª–∞–π–Ω</label>
                    <input type="date" class="form-input" id="new-task-deadline">
                </div>
            </div>
            
            <div style="background: #f0f9ff; padding: 12px; border-radius: 8px; margin-bottom: 16px;">
                <div style="font-size: 0.85rem; color: var(--gray);">–¢–∞—Ä–∏—Ñ–Ω–∞—è —Å—Ç–∞–≤–∫–∞:</div>
                <div id="task-tariff-info" style="font-size: 1rem; font-weight: 500; color: var(--primary);">
                    –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∑–∞–¥–∞—á–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–∞—Ä–∏—Ñ–∞
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 24px;">
                <button class="btn btn-success" onclick="saveNewTask()">
                    üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–¥–∞—á—É
                </button>
                <button class="btn btn-secondary" onclick="closeModal('add-task-modal')" style="margin-left: 12px;">
                    ‚ùå –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </div>
    </div>

    <script>
        // ========== GLOBAL DATA CONFIGURATION ==========
        
        let currentRole = 'employee';
        let currentPage = 'employee-salary-calc';
        let adminSelectedRole = 'reporter';
        let selectedReportType = 'salary';
        let currentReferenceTab = 'tariffs';
        let selectedTariffCategory = 'text';
        
        // Role configurations from the Word document
        const roleConfigs = {
            reporter: {
                name: "–†–µ–ø–æ—Ä—Ç—ë—Ä",
                baseSalary: 100000,
                variablePart: 30000,
                maxPenaltyPercent: 30,
                departmentAvg: 102.4,
                kpis: [
                    { name: "–ö–æ–ª-–≤–æ —Å—é–∂–µ—Ç–æ–≤", target: 20, weight: 35, unit: "—à—Ç./–º–µ—Å.", fact: 22, formula: "(–§–∞–∫—Ç / –¶–µ–ª—å) √ó 100" },
                    { name: "–û—Ö–≤–∞—Ç –∞—É–¥–∏—Ç–æ—Ä–∏–∏", target: 50000, weight: 30, unit: "—Ç—ã—Å. –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤", fact: 48000, formula: "(–§–∞–∫—Ç / –¶–µ–ª—å) √ó 100" },
                    { name: "–î–æ–ª—è –∞—É–¥–∏—Ç–æ—Ä–∏–∏ –≤ —Å–ª–æ—Ç–µ", target: 10, weight: 15, unit: "%", fact: 9.5, formula: "(–§–∞–∫—Ç / –¶–µ–ª—å) √ó 100" },
                    { name: "–≠–∫—Å–∫–ª—é–∑–∏–≤—ã", target: 8, weight: 10, unit: "—à—Ç./–º–µ—Å.", fact: 9, formula: "(–§–∞–∫—Ç / –¶–µ–ª—å) √ó 100" },
                    { name: "% –±–µ–∑ –ø—Ä–∞–≤–æ–∫", target: 90, weight: 10, unit: "%", fact: 85, formula: "(–§–∞–∫—Ç / –¶–µ–ª—å) √ó 100" }
                ]
            },
            editor: {
                name: "–†–µ–¥–∞–∫—Ç–æ—Ä",
                baseSalary: 110000,
                variablePart: 35000,
                maxPenaltyPercent: 30,
                departmentAvg: 98.7,
                kpis: [
                    { name: "% –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –±–µ–∑ –ø—Ä–∞–≤–æ–∫", target: 95, weight: 40, unit: "%", fact: 92, formula: "(–§–∞–∫—Ç / –¶–µ–ª—å) √ó 100" },
                    { name: "–í—Ä–µ–º—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏", target: 4, weight: 25, unit: "—á/—Å—é–∂–µ—Ç", fact: 3.8, formula: "(–¶–µ–ª—å / –§–∞–∫—Ç) √ó 100" },
                    { name: "–û—Ü–µ–Ω–∫–∞ –∫–æ–ª–ª–µ–≥", target: 4.5, weight: 15, unit: "/5", fact: 4.3, formula: "(–§–∞–∫—Ç / –¶–µ–ª—å) √ó 100" },
                    { name: "–†–µ—Ñ–ª–µ–∫—Å–∏—è", target: 100, weight: 10, unit: "%", fact: 100, formula: "–§–∞–∫—Ç" },
                    { name: "–†–µ–π—Ç–∏–Ω–≥ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏", target: 3, weight: 10, unit: "—Ç–æ–ø-N", fact: 2, formula: "100 –µ—Å–ª–∏ —Ç–æ–ø-3" }
                ]
            },
            smm: {
                name: "SMM-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç",
                baseSalary: 90000,
                variablePart: 25000,
                maxPenaltyPercent: 30,
                departmentAvg: 105.2,
                kpis: [
                    { name: "–ö—Ä–æ—Å—Å-–º–µ–¥–∏–π–Ω–æ—Å—Ç—å", target: 80, weight: 35, unit: "%", fact: 85, formula: "(–§–∞–∫—Ç / –¶–µ–ª—å) √ó 100" },
                    { name: "–ü—Ä–æ—Å–º–æ—Ç—Ä—ã –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö", target: 10000, weight: 30, unit: "–ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤", fact: 12000, formula: "(–§–∞–∫—Ç / –¶–µ–ª—å) √ó 100" },
                    { name: "–ü—Ä–∏—Ä–æ—Å—Ç –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤", target: 50, weight: 20, unit: "–ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤", fact: 60, formula: "(–§–∞–∫—Ç / –¶–µ–ª—å) √ó 100" },
                    { name: "UGC —Å—é–∂–µ—Ç—ã", target: 5, weight: 10, unit: "—à—Ç./–º–µ—Å.", fact: 6, formula: "(–§–∞–∫—Ç / –¶–µ–ª—å) √ó 100" },
                    { name: "–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥", target: 5, weight: 5, unit: "—Ç–æ–ø-N", fact: 3, formula: "100 –µ—Å–ª–∏ —Ç–æ–ø-5" }
                ]
            },
            production: {
                name: "–ü—Ä–æ–¥–∞–∫—à–Ω",
                baseSalary: 95000,
                variablePart: 28000,
                maxPenaltyPercent: 30,
                departmentAvg: 99.5,
                kpis: [
                    { name: "% —Å—é–∂–µ—Ç–æ–≤ –±–µ–∑ —Ç–µ—Ö—Å–±–æ–µ–≤", target: 98, weight: 40, unit: "%", fact: 96, formula: "(–§–∞–∫—Ç / –¶–µ–ª—å) √ó 100" },
                    { name: "–í—Ä–µ–º—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —Å—Ü–µ–Ω—ã", target: 2, weight: 25, unit: "—á/—Å—é–∂–µ—Ç", fact: 1.8, formula: "(–¶–µ–ª—å / –§–∞–∫—Ç) √ó 100" },
                    { name: "–ü–µ—Ä–µ—Å—ä—ë–º–∫–∏", target: 0, weight: 15, unit: "—à—Ç./–º–µ—Å.", fact: 1, formula: "100 –µ—Å–ª–∏ 0" },
                    { name: "–û—Ü–µ–Ω–∫–∞ –∑—Ä–∏—Ç–µ–ª–µ–π", target: 4, weight: 10, unit: "/5", fact: 4.2, formula: "(–§–∞–∫—Ç / –¶–µ–ª—å) √ó 100" },
                    { name: "–ü—Ä–æ—Å—Ç–æ–∏", target: 0, weight: 10, unit: "–º–∏–Ω.", fact: 15, formula: "100 –µ—Å–ª–∏ 0" }
                ]
            }
        };
        
        // My KPI Data
        const myKPIData = {
            reporter: {
                current: {
                    score: 108.5,
                    rank: 2,
                    totalEmployees: 8,
                    improvement: "+8.5 –±–∞–ª–ª–æ–≤",
                    departmentAvg: 102.4,
                    kpis: [
                        { name: "–ö–æ–ª-–≤–æ —Å—é–∂–µ—Ç–æ–≤", target: 20, fact: 22, weight: 35, score: 110.0, performance: "excellent", trend: "+2 —Å—é–∂–µ—Ç–∞" },
                        { name: "–û—Ö–≤–∞—Ç –∞—É–¥–∏—Ç–æ—Ä–∏–∏", target: 50000, fact: 48000, weight: 30, score: 96.0, performance: "good", trend: "+3,000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤" },
                        { name: "–î–æ–ª—è –∞—É–¥–∏—Ç–æ—Ä–∏–∏", target: 10, fact: 9.5, weight: 15, score: 95.0, performance: "good", trend: "-0.2%" },
                        { name: "–≠–∫—Å–∫–ª—é–∑–∏–≤—ã", target: 8, fact: 9, weight: 10, score: 112.5, performance: "excellent", trend: "+1 —ç–∫—Å–∫–ª—é–∑–∏–≤" },
                        { name: "% –±–µ–∑ –ø—Ä–∞–≤–æ–∫", target: 90, fact: 85, weight: 10, score: 94.4, performance: "average", trend: "-2%" }
                    ]
                }
            }
        };
        
        // Comparison Data
        const comparisonData = {
            reporter: {
                employees: [
                    { name: "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω", score: 108.5, isCurrent: true },
                    { name: "–ü–µ—Ç—Ä–æ–≤–∞ –ê–Ω–Ω–∞", score: 115.2, isCurrent: false },
                    { name: "–°–∏–¥–æ—Ä–æ–≤ –ü–µ—Ç—Ä", score: 98.7, isCurrent: false },
                    { name: "–ö—É–∑–Ω–µ—Ü–æ–≤–∞ –ú–∞—Ä–∏—è", score: 102.4, isCurrent: false },
                    { name: "–í–æ–ª–∫–æ–≤ –ê–ª–µ–∫—Å–µ–π", score: 104.8, isCurrent: false },
                    { name: "–ù–∏–∫–æ–ª–∞–µ–≤–∞ –ï–ª–µ–Ω–∞", score: 99.1, isCurrent: false },
                    { name: "–§–µ–¥–æ—Ä–æ–≤ –ò–≥–æ—Ä—å", score: 106.7, isCurrent: false },
                    { name: "–ü–∞–≤–ª–æ–≤–∞ –°–≤–µ—Ç–ª–∞–Ω–∞", score: 95.2, isCurrent: false }
                ]
            }
        };
        
        // Efficiency Data
        const efficiencyData = {
            current: {
                departments: [
                    { name: "–ù–æ–≤–æ—Å—Ç–Ω–æ–π –æ—Ç–¥–µ–ª", employees: 8, avgScore: 102.4, fund: 1080000, efficiency: 85, profitability: "–í—ã—Å–æ–∫–∞—è" },
                    { name: "–ü—Ä–æ–¥–∞–∫—à–Ω", employees: 6, avgScore: 99.5, fund: 810000, efficiency: 78, profitability: "–°—Ä–µ–¥–Ω—è—è" },
                    { name: "–†–µ–¥–∞–∫—Ü–∏—è", employees: 5, avgScore: 98.7, fund: 675000, efficiency: 82, profitability: "–í—ã—Å–æ–∫–∞—è" },
                    { name: "–¢–≤–æ—Ä—á–µ—Å–∫–∏–π –æ—Ç–¥–µ–ª", employees: 5, avgScore: 105.2, fund: 675000, efficiency: 91, profitability: "–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è" }
                ]
            }
        };
        
        // Forecast Data
        const forecastData = {
            next: {
                departments: [
                    { name: "–ù–æ–≤–æ—Å—Ç–Ω–æ–π –æ—Ç–¥–µ–ª", score: 104.0, efficiency: 87, fund: 1100000, trend: "up" },
                    { name: "–ü—Ä–æ–¥–∞–∫—à–Ω", score: 101.0, efficiency: 80, fund: 825000, trend: "up" },
                    { name: "–†–µ–¥–∞–∫—Ü–∏—è", score: 100.5, efficiency: 84, fund: 690000, trend: "up" },
                    { name: "–¢–≤–æ—Ä—á–µ—Å–∫–∏–π –æ—Ç–¥–µ–ª", score: 106.5, efficiency: 93, fund: 690000, trend: "up" }
                ]
            }
        };
        
        // Penalties Data
        const penaltiesData = [
            { id: 1, employee: "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω", role: "–†–µ–ø–æ—Ä—Ç—ë—Ä", type: "–û—à–∏–±–∫–∞ –≤ –º–∞—Ç–µ—Ä–∏–∞–ª–µ", amount: 1500, date: "2026-01-15", reason: "–§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ —Ä–µ–ø–æ—Ä—Ç–∞–∂–µ" },
            { id: 2, employee: "–ü–µ—Ç—Ä–æ–≤–∞ –ê–Ω–Ω–∞", role: "SMM", type: "–ü—Ä–æ—Å—Ä–æ—á–∫–∞ –ø–æ—Å—Ç–∞", amount: 500, date: "2026-01-10", reason: "–ó–∞–¥–µ—Ä–∂–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–∞ 3 —á–∞—Å–∞" }
        ];
        
        // ========== NEW DATA ==========
        
        // Tariffs Data from your specification
        const tariffsData = [
            { id: 1, name: "–¢–µ–∫—Å—Ç (–Ω–∞–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≤–µ–¥—É—â–µ–≥–æ)", type: "text", level: 1, rate: 700, unit: "—à—Ç.", note: "–ë–∞–∑–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ", category: "text" },
            { id: 2, name: "–°—é–∂–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ", type: "special", level: 3, rate: 0, unit: "–ø–æ —Å–µ—Ç–∫–µ", note: "–ü–æ —Å–µ—Ç–∫–µ –Ω–æ–≤–æ—Å—Ç–µ–π", category: "video" },
            { id: 3, name: "–û–±–∑–æ—Ä (–∏–∑ —Ä–∞–Ω–µ–µ –≤—ã—à–µ–¥—à–∏—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤, —Å–æ—Ü—Å–µ—Ç–µ–π)", type: "basic", level: 2, rate: 1200, unit: "—à—Ç.", note: "", category: "video" },
            { id: 4, name: "–†–∞–±–æ—Ç–∞ –≤ –∫–∞–¥—Ä–µ ‚Äì —Ç–µ–∫—Å—Ç –≤ —Å—Ç—É–¥–∏–∏", type: "basic", level: 1, rate: 1200, unit: "—à—Ç.", note: "", category: "video" },
            { id: 5, name: "–†–∞–±–æ—Ç–∞ –≤ –∫–∞–¥—Ä–µ ‚Äì —Ç–µ–∫—Å—Ç –Ω–∞ –≤—ã–µ–∑–¥–µ", type: "basic", level: 2, rate: 1800, unit: "—à—Ç.", note: "", category: "video" },
            { id: 6, name: "–†–∞–±–æ—Ç–∞ –≤ –∫–∞–¥—Ä–µ ‚Äì –∏–Ω—Ç–µ—Ä–≤—å—é", type: "basic", level: 3, rate: 1800, unit: "—à—Ç.", note: "", category: "video" },
            { id: 7, name: "–†–∞–±–æ—Ç–∞ –≤ –∫–∞–¥—Ä–µ ‚Äì –±–µ—Å–µ–¥–∞", type: "basic", level: 4, rate: 2500, unit: "—à—Ç.", note: "", category: "video" },
            { id: 8, name: "–†–∞–±–æ—Ç–∞ –≤ –∫–∞–¥—Ä–µ ‚Äì ¬´–∏—Å–ø—ã—Ç–∞–Ω–æ –Ω–∞ —Å–µ–±–µ¬ª, —Ä–æ–ª—å", type: "special", level: 5, rate: 4000, unit: "—à—Ç.", note: "", category: "video" },
            { id: 9, name: "–ó–∞–ø–∏—Å—å –±–ª–∏—Ü-–æ–ø—Ä–æ—Å–∞, –∏–Ω—Ç–µ—Ä–≤—å—é –∑–∞ –∫–∞–¥—Ä–æ–º", type: "additional", level: 1, rate: 700, unit: "—à—Ç.", note: "", category: "video" },
            { id: 10, name: "–ò–Ω—Ñ–æ—Ç–∏—Ç—Ä—ã, —Å—É–±—Ç–∏—Ç—Ä—ã", type: "additional", level: 1, rate: 500, unit: "—à—Ç.", note: "", category: "editing" },
            { id: 11, name: "–ò–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞ —Å–ª–æ–∂–Ω–∞—è", type: "special", level: 2, rate: 1000, unit: "—à—Ç.", note: "", category: "editing" },
            { id: 12, name: "–î–æ–ø. –º–∞—Ç–µ—Ä–∏–∞–ª—ã", type: "additional", level: 1, rate: 500, unit: "—à—Ç.", note: "", category: "other" },
            { id: 13, name: "–í–∏–¥–µ–æ ‚Äì —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Å—ä—ë–º–∫–∞ (–ø—Ä–æ–º–æ, –Ω–∞–ø—Ä.)", type: "special", level: 3, rate: 1200, unit: "—à—Ç.", note: "", category: "video" },
            { id: 14, name: "–ó–∞–∫–∞–¥—Ä–æ–≤—ã–π —Ç–µ–∫—Å—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏–µ", type: "text", level: 2, rate: 2000, unit: "—à—Ç.", note: "", category: "text" },
            { id: 15, name: "–í–æ–ø—Ä–æ—Å—ã –¥–ª—è –∏–Ω—Ç–µ—Ä–≤—å—é - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞", type: "text", level: 1, rate: 700, unit: "—à—Ç.", note: "", category: "text" },
            { id: 16, name: "–°—Ü–µ–Ω–∞—Ä–∏–π", type: "text", level: 3, rate: 2000, unit: "—à—Ç.", note: "", category: "text" },
            { id: 17, name: "–ü—Ä–æ–¥—é—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—ä—ë–º–∫–∏ (–ø–æ–∏—Å–∫ –ª–æ–∫–∞—Ü–∏–π, –≥–µ—Ä–æ–µ–≤ –∏ –ø—Ä.)", type: "production", level: 1, rate: 1000, unit: "—à—Ç.", note: "", category: "production" },
            { id: 18, name: "–°–ª–æ–∂–Ω–æ–µ –ø—Ä–æ–¥—é—Å–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ä–µ–∂–∏—Å—Å—É—Ä–∞", type: "production", level: 2, rate: 3000, unit: "—à—Ç.", note: "", category: "production" },
            { id: 19, name: "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—Å–Ω—è—Ç–æ–≥–æ –¥–æ 3 –º–∏–Ω", type: "editing", level: 1, rate: 1000, unit: "—à—Ç.", note: "", category: "editing" },
            { id: 20, name: "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—Å–Ω—è—Ç–æ–≥–æ –±–æ–ª—å—à–µ 3 –º–∏–Ω", type: "editing", level: 2, rate: 3000, unit: "—à—Ç.", note: "", category: "editing" },
            { id: 21, name: "–°–ø–µ—Ü–ø–æ–µ–∑–¥–∫–∏ (–∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫–∏)", type: "special", level: 3, rate: 1200, unit: "–¥–µ–Ω—å", note: "", category: "other" },
            { id: 22, name: "–ü—Ä—è–º–æ–π —ç—Ñ–∏—Ä", type: "special", level: 3, rate: 1200, unit: "—á–∞—Å", note: "", category: "video" },
            { id: 23, name: "–ù–∞—á–∏—Ç—ã–≤–∞–Ω–∏–µ", type: "additional", level: 1, rate: 700, unit: "—à—Ç.", note: "", category: "other" },
            { id: 24, name: "–ê–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ", type: "additional", level: 1, rate: 700, unit: "—à—Ç.", note: "", category: "other" },
            { id: 25, name: "–•—Ä–æ–Ω–æ –±–æ–ª—å—à–µ 5 –º–∏–Ω", type: "additional", level: 1, rate: 0.3, unit: "–º–∏–Ω—É—Ç–∞", note: "–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç", category: "editing" },
            { id: 26, name: "–•—Ä–æ–Ω–æ –±–æ–ª—å—à–µ 10 –º–∏–Ω", type: "additional", level: 2, rate: 0.5, unit: "–º–∏–Ω—É—Ç–∞", note: "–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç", category: "editing" }
        ];
        
        // Employees Data
        const employeesData = [
            { id: 1, name: "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω", position: "–†–µ–ø–æ—Ä—Ç—ë—Ä", department: "–ù–æ–≤–æ—Å—Ç–Ω–æ–π –æ—Ç–¥–µ–ª", hireDate: "2023-01-15", salary: 100000, status: "active" },
            { id: 2, name: "–ü–µ—Ç—Ä–æ–≤–∞ –ê–Ω–Ω–∞", position: "SMM-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç", department: "–¢–≤–æ—Ä—á–µ—Å–∫–∏–π –æ—Ç–¥–µ–ª", hireDate: "2023-03-20", salary: 90000, status: "active" },
            { id: 3, name: "–°–∏–¥–æ—Ä–æ–≤ –ü–µ—Ç—Ä", position: "–†–µ–¥–∞–∫—Ç–æ—Ä", department: "–†–µ–¥–∞–∫—Ü–∏—è", hireDate: "2022-11-10", salary: 110000, status: "active" },
            { id: 4, name: "–ö—É–∑–Ω–µ—Ü–æ–≤–∞ –ú–∞—Ä–∏—è", position: "–†–µ–¥–∞–∫—Ç–æ—Ä", department: "–†–µ–¥–∞–∫—Ü–∏—è", hireDate: "2023-05-12", salary: 105000, status: "active" },
            { id: 5, name: "–í–æ–ª–∫–æ–≤ –ê–ª–µ–∫—Å–µ–π", position: "–ü—Ä–æ–¥–∞–∫—à–Ω", department: "–ü—Ä–æ–¥–∞–∫—à–Ω", hireDate: "2023-02-28", salary: 95000, status: "active" }
        ];
        
        // Products Data
        const productsData = [
            { id: 1, name: "–ù–æ–≤–æ—Å—Ç–Ω–æ–π —Å—é–∂–µ—Ç", category: "–í–∏–¥–µ–æ", description: "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –Ω–æ–≤–æ—Å—Ç–Ω–æ–π –º–∞—Ç–µ—Ä–∏–∞–ª", complexity: "–°—Ä–µ–¥–Ω—è—è" },
            { id: 2, name: "–ò–Ω—Ç–µ—Ä–≤—å—é", category: "–í–∏–¥–µ–æ", description: "–ò–Ω—Ç–µ—Ä–≤—å—é —Å —ç–∫—Å–ø–µ—Ä—Ç–æ–º –∏–ª–∏ –≥–µ—Ä–æ–µ–º", complexity: "–í—ã—Å–æ–∫–∞—è" },
            { id: 3, name: "–†–µ–ø–æ—Ä—Ç–∞–∂", category: "–í–∏–¥–µ–æ", description: "–í—ã–µ–∑–¥–Ω–æ–π —Ä–µ–ø–æ—Ä—Ç–∞–∂ —Å –º–µ—Å—Ç–∞ —Å–æ–±—ã—Ç–∏–π", complexity: "–í—ã—Å–æ–∫–∞—è" },
            { id: 4, name: "–°—Ç–∞—Ç—å—è", category: "–¢–µ–∫—Å—Ç", description: "–¢–µ–∫—Å—Ç–æ–≤–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è", complexity: "–ù–∏–∑–∫–∞—è" },
            { id: 5, name: "–°–æ—Ü–∏–∞–ª—å–Ω—ã–π –ø–æ—Å—Ç", category: "SMM", description: "–ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö", complexity: "–ù–∏–∑–∫–∞—è" },
            { id: 6, name: "–ò–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞", category: "–ì—Ä–∞—Ñ–∏–∫–∞", description: "–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö", complexity: "–°—Ä–µ–¥–Ω—è—è" }
        ];
        
        // Tasks Data
        const tasksData = [
            { 
                id: 1, 
                type: "text_writing", 
                typeName: "–¢–µ–∫—Å—Ç (–Ω–∞–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≤–µ–¥—É—â–µ–≥–æ)",
                title: "–¢–µ–∫—Å—Ç –¥–ª—è –Ω–æ–≤–æ—Å—Ç–Ω–æ–≥–æ –≤—ã–ø—É—Å–∫–∞",
                description: "–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –≤–µ–¥—É—â–µ–≥–æ –¥–ª—è –≤–µ—á–µ—Ä–Ω–µ–≥–æ –≤—ã–ø—É—Å–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π",
                estimatedTime: 2,
                actualTime: 1.5,
                status: "completed",
                priority: "high",
                startDate: "2026-01-10",
                endDate: "2026-01-30",
                deadline: "2026-01-28",
                tariff: 700,
                note: "–¢–µ–∫—Å—Ç —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –∏ –ø—Ä–∏–Ω—è—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º"
            },
            { 
                id: 2, 
                type: "interview", 
                typeName: "–†–∞–±–æ—Ç–∞ –≤ –∫–∞–¥—Ä–µ ‚Äì –∏–Ω—Ç–µ—Ä–≤—å—é",
                title: "–ò–Ω—Ç–µ—Ä–≤—å—é —Å —ç–∫—Å–ø–µ—Ä—Ç–æ–º –ø–æ —ç–∫–æ–Ω–æ–º–∏–∫–µ",
                description: "–ó–∞–ø–∏—Å—å –∏–Ω—Ç–µ—Ä–≤—å—é —Å –ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä–æ–º —ç–∫–æ–Ω–æ–º–∏–∫–∏ –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ø–æ—Ä—Ç–∞–∂–∞",
                estimatedTime: 3,
                actualTime: 0,
                status: "in_progress",
                priority: "urgent",
                startDate: "2026-01-11",
                endDate: null,
                deadline: "2026-01-22",
                tariff: 1800,
                note: "–ù–∞–∑–Ω–∞—á–µ–Ω–æ –Ω–∞ 23 —è–Ω–≤–∞—Ä—è"
            },
            { 
                id: 3, 
                type: "editing_short", 
                typeName: "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—Å–Ω—è—Ç–æ–≥–æ –¥–æ 3 –º–∏–Ω",
                title: "–ú–æ–Ω—Ç–∞–∂ –Ω–æ–≤–æ—Å—Ç–Ω–æ–≥–æ —Å—é–∂–µ—Ç–∞",
                description: "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—é–∂–µ—Ç–∞ –æ –≥–æ—Ä–æ–¥—Å–∫–æ–º –ø—Ä–∞–∑–¥–Ω–∏–∫–µ",
                estimatedTime: 2.5,
                actualTime: 2,
                status: "completed",
                priority: "medium",
                startDate: "2026-01-19",
                endDate: "2026-01-19",
                deadline: "2026-01-20",
                tariff: 1000,
                note: "–°—é–∂–µ—Ç –≤—ã—à–µ–ª –≤ —ç—Ñ–∏—Ä"
            },
            { 
                id: 4, 
                type: "field_text", 
                typeName: "–†–∞–±–æ—Ç–∞ –≤ –∫–∞–¥—Ä–µ ‚Äì —Ç–µ–∫—Å—Ç –Ω–∞ –≤—ã–µ–∑–¥–µ",
                title: "–†–µ–ø–æ—Ä—Ç–∞–∂ —Å –æ—Ç–∫—Ä—ã—Ç–∏—è –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–∫–∞",
                description: "–ü—Ä—è–º–æ–π —Ä–µ–ø–æ—Ä—Ç–∞–∂ —Å –º–µ—Å—Ç–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –≥–æ—Ä–æ–¥—Å–∫–æ–≥–æ –ø–∞—Ä–∫–∞",
                estimatedTime: 4,
                actualTime: 3.5,
                status: "completed",
                priority: "high",
                startDate: "2026-01-18",
                endDate: "2026-01-18",
                deadline: "2026-01-18",
                tariff: 1800,
                note: "–£—Å–ø–µ—à–Ω—ã–π –ø—Ä—è–º–æ–π —ç—Ñ–∏—Ä"
            },
            { 
                id: 5, 
                type: "script", 
                typeName: "–°—Ü–µ–Ω–∞—Ä–∏–π",
                title: "–°—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Ñ–∏–ª—å–º–∞",
                description: "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Ñ–∏–ª—å–º–∞ –æ –≥–æ—Ä–æ–¥–µ",
                estimatedTime: 8,
                actualTime: 0,
                status: "pending",
                priority: "medium",
                startDate: "2026-01-25",
                endDate: null,
                deadline: "2026-02-01",
                tariff: 2000,
                note: "–í –æ–∂–∏–¥–∞–Ω–∏–∏ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ç–µ–º—ã"
            }
        ];
        
        // Task type mapping to tariffs
        const taskTypeMapping = {
            "text_writing": { name: "–¢–µ–∫—Å—Ç (–Ω–∞–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≤–µ–¥—É—â–µ–≥–æ)", rate: 700 },
            "special_story": { name: "–°—é–∂–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ", rate: 0 },
            "review": { name: "–û–±–∑–æ—Ä –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤", rate: 1200 },
            "studio_text": { name: "–†–∞–±–æ—Ç–∞ –≤ –∫–∞–¥—Ä–µ ‚Äì —Ç–µ–∫—Å—Ç –≤ —Å—Ç—É–¥–∏–∏", rate: 1200 },
            "field_text": { name: "–†–∞–±–æ—Ç–∞ –≤ –∫–∞–¥—Ä–µ ‚Äì —Ç–µ–∫—Å—Ç –Ω–∞ –≤—ã–µ–∑–¥–µ", rate: 1800 },
            "interview": { name: "–†–∞–±–æ—Ç–∞ –≤ –∫–∞–¥—Ä–µ ‚Äì –∏–Ω—Ç–µ—Ä–≤—å—é", rate: 1800 },
            "conversation": { name: "–†–∞–±–æ—Ç–∞ –≤ –∫–∞–¥—Ä–µ ‚Äì –±–µ—Å–µ–¥–∞", rate: 2500 },
            "role_playing": { name: "–†–∞–±–æ—Ç–∞ –≤ –∫–∞–¥—Ä–µ ‚Äì ¬´–∏—Å–ø—ã—Ç–∞–Ω–æ –Ω–∞ —Å–µ–±–µ¬ª, —Ä–æ–ª—å", rate: 4000 },
            "blitz_interview": { name: "–ó–∞–ø–∏—Å—å –±–ª–∏—Ü-–æ–ø—Ä–æ—Å–∞, –∏–Ω—Ç–µ—Ä–≤—å—é –∑–∞ –∫–∞–¥—Ä–æ–º", rate: 700 },
            "subtitles": { name: "–ò–Ω—Ñ–æ—Ç–∏—Ç—Ä—ã, —Å—É–±—Ç–∏—Ç—Ä—ã", rate: 500 },
            "infographics": { name: "–ò–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞ —Å–ª–æ–∂–Ω–∞—è", rate: 1000 },
            "additional_materials": { name: "–î–æ–ø. –º–∞—Ç–µ—Ä–∏–∞–ª—ã", rate: 500 },
            "special_shooting": { name: "–í–∏–¥–µ–æ ‚Äì —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Å—ä—ë–º–∫–∞", rate: 1200 },
            "voiceover_text": { name: "–ó–∞–∫–∞–¥—Ä–æ–≤—ã–π —Ç–µ–∫—Å—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏–µ", rate: 2000 },
            "interview_questions": { name: "–í–æ–ø—Ä–æ—Å—ã –¥–ª—è –∏–Ω—Ç–µ—Ä–≤—å—é - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞", rate: 700 },
            "script": { name: "–°—Ü–µ–Ω–∞—Ä–∏–π", rate: 2000 },
            "producing": { name: "–ü—Ä–æ–¥—é—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—ä—ë–º–∫–∏", rate: 1000 },
            "complex_producing": { name: "–°–ª–æ–∂–Ω–æ–µ –ø—Ä–æ–¥—é—Å–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ä–µ–∂–∏—Å—Å—É—Ä–∞", rate: 3000 },
            "editing_short": { name: "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—Å–Ω—è—Ç–æ–≥–æ –¥–æ 3 –º–∏–Ω", rate: 1000 },
            "editing_long": { name: "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—Å–Ω—è—Ç–æ–≥–æ –±–æ–ª—å—à–µ 3 –º–∏–Ω", rate: 3000 },
            "business_trip": { name: "–°–ø–µ—Ü–ø–æ–µ–∑–¥–∫–∏ (–∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫–∏)", rate: 1200 },
            "live_broadcast": { name: "–ü—Ä—è–º–æ–π —ç—Ñ–∏—Ä", rate: 1200 },
            "narration": { name: "–ù–∞—á–∏—Ç—ã–≤–∞–Ω–∏–µ", rate: 700 },
            "announcement": { name: "–ê–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ", rate: 700 },
            "other": { name: "–î—Ä—É–≥–∞—è –∑–∞–¥–∞—á–∞", rate: 0 }
        };
        
        // ========== CORE FUNCTIONS ==========
        
        function switchRole(role) {
            currentRole = role;
            
            // Update buttons in main header
            document.querySelectorAll('.role-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.role-btn').forEach(btn => {
                if (btn.textContent.includes(role === 'employee' ? '–°–æ—Ç—Ä—É–¥–Ω–∏–∫' : role === 'analyst' ? '–ê–Ω–∞–ª–∏—Ç–∏–∫' : '–ê–¥–º–∏–Ω')) {
                    btn.classList.add('active');
                }
            });
            
            // Show correct sidebar
            document.getElementById('employee-sidebar').classList.add('hidden');
            document.getElementById('analyst-sidebar').classList.add('hidden');
            document.getElementById('admin-sidebar').classList.add('hidden');
            document.getElementById(role + '-sidebar').classList.remove('hidden');
            
            // Hide all pages
            document.querySelectorAll('main > div').forEach(div => div.classList.add('hidden'));
            
            // Show default page for role
            if (role === 'employee') {
                showPage('employee-salary-calc');
            } else if (role === 'analyst') {
                showPage('analyst-efficiency');
            } else if (role === 'admin') {
                showPage('admin-kpi');
            }
        }
        
        function showPage(pageId) {
            currentPage = pageId;
            
            // Hide all pages
            document.querySelectorAll('main > div').forEach(div => div.classList.add('hidden'));
            
            // Show selected page
            document.getElementById(pageId).classList.remove('hidden');
            
            // Update navigation
            if (pageId.includes('employee')) {
                document.querySelectorAll('#employee-sidebar .nav-link').forEach(link => link.classList.remove('active'));
                document.querySelector(`#employee-sidebar a[onclick*="${pageId}"]`).classList.add('active');
                document.querySelectorAll('#employee-sidebar .role-btn-sidebar').forEach(btn => btn.classList.remove('active'));
                document.querySelector('#employee-sidebar .role-btn-sidebar[onclick*="employee"]').classList.add('active');
            } else if (pageId.includes('analyst')) {
                document.querySelectorAll('#analyst-sidebar .nav-link').forEach(link => link.classList.remove('active'));
                document.querySelector(`#analyst-sidebar a[onclick*="${pageId}"]`).classList.add('active');
                document.querySelectorAll('#analyst-sidebar .role-btn-sidebar').forEach(btn => btn.classList.remove('active'));
                document.querySelector('#analyst-sidebar .role-btn-sidebar[onclick*="analyst"]').classList.add('active');
            } else if (pageId.includes('admin')) {
                document.querySelectorAll('#admin-sidebar .nav-link').forEach(link => link.classList.remove('active'));
                document.querySelector(`#admin-sidebar a[onclick*="${pageId}"]`).classList.add('active');
                document.querySelectorAll('#admin-sidebar .role-btn-sidebar').forEach(btn => btn.classList.remove('active'));
                document.querySelector('#admin-sidebar .role-btn-sidebar[onclick*="admin"]').classList.add('active');
            }
            
            // Load data for page
            if (pageId === 'employee-salary-calc') {
                loadRoleData();
            } else if (pageId === 'employee-my-kpi') {
                loadMyKPI();
            } else if (pageId === 'employee-tasks') {
                loadTasksData();
            } else if (pageId === 'employee-comparison') {
                loadComparison();
            } else if (pageId === 'analyst-efficiency') {
                loadEfficiencyData();
            } else if (pageId === 'analyst-forecast') {
                loadForecastData();
            } else if (pageId === 'admin-kpi') {
                loadAdminKPI();
            } else if (pageId === 'admin-penalties') {
                loadPenaltiesData();
            } else if (pageId === 'admin-reference') {
                loadReferenceData();
            }
        }
        
        // ========== EMPLOYEE FUNCTIONS ==========
        
        function loadRoleData() {
            const role = document.getElementById('employee-role').value;
            const config = roleConfigs[role];
            
            // Update department average
            document.getElementById('department-avg-score').textContent = config.departmentAvg.toFixed(1);
            
            // Load KPI inputs
            const container = document.getElementById('kpi-inputs-container');
            container.innerHTML = '';
            
            config.kpis.forEach((kpi, index) => {
                const row = document.createElement('div');
                row.className = 'kpi-input-row';
                
                const score = calculateKPIScore(kpi.fact, kpi.target, kpi.formula);
                if (kpi.name === "–ö–æ–ª-–≤–æ —Å—é–∂–µ—Ç–æ–≤") {                
                row.innerHTML = `
                <div>
                    <div style="font-weight: 500; font-size: 0.9rem;">${kpi.name}</div>
                    <div style="font-size: 0.8rem; color: var(--gray);">${kpi.unit}</div>
                </div>
                <div>${kpi.target}</div>
                <div>${kpi.weight}%</div>
                <div>
                    <input type="number" class="form-input" 
                           value="${kpi.fact}" 
                           oninput="updateKPI(${index}, this.value)"
                           style="width: 70px; padding: 6px 8px;">
                </div>
                <div>
                    <span id="kpi-score-${index}" style="font-weight: 500; color: var(--primary);">${score.toFixed(1)}</span>
                </div>
            `;
        } else {
            row.innerHTML = `
                <div>
                    <div style="font-weight: 500; font-size: 0.9rem;">${kpi.name}</div>
                    <div style="font-size: 0.8rem; color: var(--gray);">${kpi.unit}</div>
                </div>
                <div>${kpi.target}</div>
                <div>${kpi.weight}%</div>
                <div>
                    <div style="font-weight: 500; font-size: 0.9rem;">${kpi.fact}</div>
                </div>
                <div>
                    <span id="kpi-score-${index}" style="font-weight: 500; color: var(--primary);">${score.toFixed(1)}</span>
                </div>
            `;
        }
                
                container.appendChild(row);
            });
            
            // Calculate total score
            calculateTotalScore();
        }
        
        function updateKPI(index, value) {
            const role = document.getElementById('employee-role').value;
            const config = roleConfigs[role];
            
            config.kpis[index].fact = parseFloat(value) || 0;
            
            // Update displayed score
            const score = calculateKPIScore(config.kpis[index].fact, config.kpis[index].target, config.kpis[index].formula);
            document.getElementById(`kpi-score-${index}`).textContent = score.toFixed(1);
            
            // Recalculate total
            calculateTotalScore();
        }
        
        function calculateKPIScore(fact, target, formula) {
            if (!target && target !== 0) return 100;
            
            let score;
            if (formula.includes('(–¶–µ–ª—å / –§–∞–∫—Ç)')) {
                score = fact > 0 ? (target / fact) * 100 : 0;
            } else if (formula.includes('100 –µ—Å–ª–∏')) {
                if (formula.includes('—Ç–æ–ø-3')) {
                    score = fact <= 3 ? 100 : 0;
                } else if (formula.includes('—Ç–æ–ø-5')) {
                    score = fact <= 5 ? 100 : 0;
                } else if (formula.includes('–µ—Å–ª–∏ 0')) {
                    score = fact === 0 ? 100 : 0;
                } else {
                    score = fact;
                }
            } else if (formula === '–§–∞–∫—Ç') {
                score = fact;
            } else {
                score = (fact / target) * 100;
            }
            
            return Math.min(score, 120);
        }
        
        function calculateTotalScore() {
            const role = document.getElementById('employee-role').value;
            const config = roleConfigs[role];
            
            let totalScore = 0;
            let totalWeight = 0;
            
            config.kpis.forEach(kpi => {
                const score = calculateKPIScore(kpi.fact, kpi.target, kpi.formula);
                totalScore += score * (kpi.weight / 100);
                totalWeight += kpi.weight;
            });
            
            // Adjust for total weight
            if (totalWeight !== 100) {
                totalScore = totalScore * (100 / totalWeight);
            }
            
            document.getElementById('total-score').textContent = totalScore.toFixed(1);
            return totalScore;
        }
        
        function calculateSalary() {
            const role = document.getElementById('employee-role').value;
            const config = roleConfigs[role];
            
            // Get scores
            const employeeScore = calculateTotalScore();
            const departmentAvg = config.departmentAvg;
            
            // Calculate normalization factor
            const normFactor = employeeScore / departmentAvg;
            
            // Calculate variable part with normalization
            let variablePart = config.variablePart * normFactor;
            
            // Calculate total salary
            const totalSalary = config.baseSalary + variablePart;
            
            // Update results
            document.getElementById('result-base').textContent = config.baseSalary.toLocaleString() + ' ‚ÇΩ';
            document.getElementById('result-variable').textContent = Math.round(variablePart).toLocaleString() + ' ‚ÇΩ';
            document.getElementById('result-total').textContent = Math.round(totalSalary).toLocaleString() + ' ‚ÇΩ';
            document.getElementById('result-factor').textContent = normFactor.toFixed(3);
            document.getElementById('result-norm-variable').textContent = Math.round(variablePart).toLocaleString() + ' ‚ÇΩ';
            
            // Show results
            document.getElementById('salary-results').classList.remove('hidden');
        }
        
        // ========== MY KPI FUNCTIONS ==========
        
        function loadMyKPI() {
            const period = document.getElementById('kpi-period').value;
            const role = document.getElementById('employee-role').value;
            const data = myKPIData[role] ? myKPIData[role][period] : myKPIData.reporter.current;
            
            if (!data) return;
            
            // Load overview cards
            loadKPIOverview(data);
            
            // Load detailed table
            loadKPIDetails(data);
            
            // Load trends
            loadKPITrends(role, period);
        }
        
        function loadKPIOverview(data) {
            const container = document.getElementById('my-kpi-overview');
            if (!container) return;
            
            const normFactor = (data.score / data.departmentAvg).toFixed(3);
            const bonus = Math.round(30000 * normFactor - 30000);
            
            container.innerHTML = `
                <div class="kpi-card">
                    <div style="color: var(--gray); font-size: 0.85rem;">–ò—Ç–æ–≥–æ–≤—ã–µ –±–∞–ª–ª—ã</div>
                    <div class="kpi-value">${data.score.toFixed(1)}</div>
                    <div class="kpi-trend trend-up">${data.improvement}</div>
                    <div style="font-size: 0.85rem; color: var(--gray);">–ú–µ—Å—Ç–æ: ${data.rank}/${data.totalEmployees}</div>
                </div>
                <div class="kpi-card">
                    <div style="color: var(--gray); font-size: 0.85rem;">–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∞</div>
                    <div class="kpi-value">${(data.score / 100 * 100).toFixed(0)}%</div>
                    <div class="kpi-trend trend-up">+${(data.score - 100).toFixed(1)} –±–∞–ª–ª–æ–≤</div>
                    <div style="font-size: 0.85rem; color: var(--gray);">–ö –ø–ª–∞–Ω–æ–≤—ã–º 100 –±–∞–ª–ª–∞–º</div>
                </div>
                <div class="kpi-card">
                    <div style="color: var(--gray); font-size: 0.85rem;">–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–æ—Ä–º.</div>
                    <div class="kpi-value">${normFactor}</div>
                    <div class="kpi-trend trend-up">${bonus > 0 ? '+' : ''}${bonus} ‚ÇΩ</div>
                    <div style="font-size: 0.85rem; color: var(--gray);">–ö –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —á–∞—Å—Ç–∏</div>
                </div>
            `;
        }
        
        function loadKPIDetails(data) {
            const container = document.getElementById('my-kpi-table');
            if (!container) return;
            
            container.innerHTML = '';
            
            let totalWeightedScore = 0;
            
            data.kpis.forEach(kpi => {
                const performanceClass = `performance-${kpi.performance}`;
                const weightedScore = kpi.score * (kpi.weight / 100);
                totalWeightedScore += weightedScore;
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <div style="font-weight: 500; font-size: 0.9rem;">${kpi.name}</div>
                        <div style="font-size: 0.8rem; color: var(--gray);">${kpi.trend}</div>
                    </td>
                    <td>${kpi.target}</td>
                    <td>${kpi.fact}</td>
                    <td>${kpi.weight}%</td>
                    <td>
                        <div class="kpi-performance">
                            <div class="performance-indicator ${performanceClass}">
                                ${kpi.score.toFixed(1)}
                            </div>
                        </div>
                    </td>
                    <td>${weightedScore.toFixed(2)}</td>
                    <td>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${Math.min(kpi.score / 120 * 100, 100)}%"></div>
                        </div>
                        <div style="text-align: center; font-size: 0.8rem; margin-top: 2px;">
                            ${Math.min(kpi.score, 120).toFixed(1)}/120
                        </div>
                    </td>
                `;
                container.appendChild(row);
            });
        }
        
        function loadKPITrends(role, period) {
            const container = document.getElementById('kpi-trends');
            if (!container) return;
            
            container.innerHTML = `
                <div class="form-container">
                    <h3 style="margin-bottom: 12px; font-size: 1rem;">üìà –î–∏–Ω–∞–º–∏–∫–∞ KPI –∑–∞ 3 –º–µ—Å—è—Ü–∞</h3>
                    <div style="display: flex; justify-content: space-around; margin: 16px 0;">
                        <div style="text-align: center;">
                            <div style="font-size: 0.8rem; color: var(--gray);">–ù–æ—è–±—Ä—å</div>
                            <div style="font-size: 1.25rem; font-weight: bold;">96.2</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 0.8rem; color: var(--gray);">–î–µ–∫–∞–±—Ä—å</div>
                            <div style="font-size: 1.25rem; font-weight: bold;">100.0</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 0.8rem; color: var(--gray);">–Ø–Ω–≤–∞—Ä—å</div>
                            <div style="font-size: 1.25rem; font-weight: bold; color: var(--primary);">108.5</div>
                        </div>
                    </div>
                    <div style="height: 50px; display: flex; align-items: flex-end; justify-content: space-around;">
                        <div style="width: 30px; height: 40%; background: var(--gray); border-radius: 4px 4px 0 0;"></div>
                        <div style="width: 30px; height: 60%; background: var(--gray); border-radius: 4px 4px 0 0;"></div>
                        <div style="width: 30px; height: 80%; background: var(--primary); border-radius: 4px 4px 0 0;"></div>
                    </div>
                </div>
            `;
        }
        
        // ========== TASKS FUNCTIONS ==========
        
        function loadTasksData() {
            // Calculate statistics
            const totalTasks = tasksData.length;
            const activeTasks = tasksData.filter(task => task.status === 'in_progress' || task.status === 'pending').length;
            const completedTasks = tasksData.filter(task => task.status === 'completed').length;
            const totalHours = tasksData.filter(task => task.actualTime > 0).reduce((sum, task) => sum + task.actualTime, 0);
            
            // Update statistics
            document.getElementById('total-tasks').textContent = totalTasks;
            document.getElementById('active-tasks').textContent = activeTasks;
            document.getElementById('completed-tasks').textContent = completedTasks;
            document.getElementById('total-hours').textContent = totalHours.toFixed(1);
            
            // Load current tasks
            loadCurrentTasks();
            
            // Load task history
            loadTaskHistory();
            
            // Load time summary
            loadTimeSummary();
        }
        
        function loadCurrentTasks() {
            const container = document.getElementById('current-tasks');
            if (!container) return;
            
            const currentTasks = tasksData.filter(task => task.status !== 'completed');
            
            if (currentTasks.length === 0) {
                container.innerHTML = `
                    <div class="form-container" style="text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 12px;">üì≠</div>
                        <div style="font-weight: 500; margin-bottom: 8px;">–ù–µ—Ç —Ç–µ–∫—É—â–∏—Ö –∑–∞–¥–∞—á</div>
                        <div style="color: var(--gray); font-size: 0.9rem;">–í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!</div>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            
            currentTasks.forEach(task => {
                const taskCard = document.createElement('div');
                taskCard.className = 'task-card';
                
                // Get status display
                let statusText, statusClass;
                switch(task.status) {
                    case 'pending':
                        statusText = '–í –æ–∂–∏–¥–∞–Ω–∏–∏';
                        statusClass = 'status-pending';
                        break;
                    case 'in_progress':
                        statusText = '–í —Ä–∞–±–æ—Ç–µ';
                        statusClass = 'status-in-progress';
                        break;
                    default:
                        statusText = '–ù–æ–≤—ã–π';
                        statusClass = 'status-pending';
                }
                
                // Calculate days until deadline
                const today = new Date();
                const deadline = new Date(task.deadline);
                const daysLeft = Math.ceil((deadline - today) / (1000 * 60 * 60 * 24));
                
                taskCard.innerHTML = `
                    <div class="task-header">
                        <div>
                            <div style="font-weight: 500; font-size: 0.95rem;">${task.title}</div>
                            <div class="task-type">${task.typeName}</div>
                        </div>
                        <div>
                            <span class="task-status ${statusClass}">${statusText}</span>
                        </div>
                    </div>
                    
                    <div style="font-size: 0.85rem; color: var(--gray); margin-bottom: 12px;">
                        ${task.description}
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; font-size: 0.85rem; margin-bottom: 8px;">
                        <div>
                            <span style="color: var(--gray);">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</span>
                            <span style="font-weight: 500; color: ${task.priority === 'urgent' ? 'var(--danger)' : task.priority === 'high' ? 'var(--warning)' : 'var(--primary)'}">
                                ${task.priority === 'urgent' ? '–°—Ä–æ—á–Ω—ã–π' : task.priority === 'high' ? '–í—ã—Å–æ–∫–∏–π' : task.priority === 'medium' ? '–°—Ä–µ–¥–Ω–∏–π' : '–ù–∏–∑–∫–∏–π'}
                            </span>
                        </div>
                        <div>
                            <span style="color: var(--gray);">–î–µ–¥–ª–∞–π–Ω:</span>
                            <span style="font-weight: 500; color: ${daysLeft < 0 ? 'var(--danger)' : daysLeft <= 2 ? 'var(--warning)' : 'var(--success)'}">
                                ${task.deadline} (${daysLeft < 0 ? '–ø—Ä–æ—Å—Ä–æ—á–µ–Ω–æ' : daysLeft === 0 ? '—Å–µ–≥–æ–¥–Ω—è' : daysLeft + ' –¥–Ω.'})
                            </span>
                        </div>
                    </div>
                    
                    <div class="task-time">
                        <div>
                            <span style="color: var(--gray); font-size: 0.85rem;">–ó–∞—Ç—Ä–∞—á–µ–Ω–æ –≤—Ä–µ–º–µ–Ω–∏:</span>
                            <input type="number" class="time-input" 
                                   value="${task.actualTime}" 
                                   min="0" max="24" step="0.5"
                                   onchange="updateTaskTime(${task.id}, this.value)">
                            <span class="time-unit">—á–∞—Å–æ–≤</span>
                        </div>
                        <div style="margin-left: auto;">
                            <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 0.8rem;" onclick="startTask(${task.id})">
                                ‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å
                            </button>
                            <button class="btn btn-success" style="padding: 6px 12px; font-size: 0.8rem; margin-left: 8px;" onclick="completeTask(${task.id})">
                                ‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å
                            </button>
                        </div>
                    </div>
                    
                    <div style="font-size: 0.8rem; color: var(--primary); margin-top: 8px;">
                        üí∞ –¢–∞—Ä–∏—Ñ: ${task.tariff} ‚ÇΩ
                    </div>
                `;
                
                container.appendChild(taskCard);
            });
        }
        
        function loadTaskHistory() {
            const container = document.getElementById('task-history');
            if (!container) return;
            
            const completedTasks = tasksData.filter(task => task.status === 'completed');
            
            if (completedTasks.length === 0) {
                container.innerHTML = `
                    <div class="form-container" style="text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 12px;">üìä</div>
                        <div style="font-weight: 500; margin-bottom: 8px;">–ò—Å—Ç–æ—Ä–∏—è –∑–∞–¥–∞—á –ø—É—Å—Ç–∞</div>
                        <div style="color: var(--gray); font-size: 0.9rem;">–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å</div>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            
            completedTasks.slice().reverse().forEach(task => {
                const historyItem = document.createElement('div');
                historyItem.className = 'task-history-item';
                
                // Calculate earnings
                const earnings = task.tariff > 0 ? task.actualTime * (task.tariff / task.estimatedTime) : 0;
                
                historyItem.innerHTML = `
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <div style="font-weight: 500;">${task.title}</div>
                        <div style="font-size: 0.85rem; color: var(--gray);">${task.endDate}</div>
                    </div>
                    
                    <div style="font-size: 0.85rem; color: var(--gray); margin-bottom: 8px;">
                        ${task.typeName}
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; font-size: 0.85rem;">
                        <div>
                            <span style="color: var(--gray);">–í—Ä–µ–º—è:</span>
                            <span style="font-weight: 500;">${task.actualTime} —á –∏–∑ ${task.estimatedTime} —á</span>
                        </div>
                        <div>
                            <span style="color: var(--gray);">–û–ø–ª–∞—Ç–∞:</span>
                            <span style="font-weight: 500; color: var(--success);">${earnings.toFixed(0)} ‚ÇΩ</span>
                        </div>
                    </div>
                    
                    ${task.note ? `
                    <div style="font-size: 0.8rem; color: var(--gray); margin-top: 8px; padding-top: 8px; border-top: 1px solid var(--border);">
                        ${task.note}
                    </div>
                    ` : ''}
                `;
                
                container.appendChild(historyItem);
            });
        }
        
        function loadTimeSummary() {
            const container = document.getElementById('time-summary');
            if (!container) return;
            
            const completedTasks = tasksData.filter(task => task.status === 'completed');
            const totalEstimated = completedTasks.reduce((sum, task) => sum + task.estimatedTime, 0);
            const totalActual = completedTasks.reduce((sum, task) => sum + task.actualTime, 0);
            const efficiency = totalEstimated > 0 ? (totalActual / totalEstimated * 100).toFixed(0) : 0;
            
            // Calculate earnings by task type
            const earningsByType = {};
            completedTasks.forEach(task => {
                if (!earningsByType[task.type]) {
                    earningsByType[task.type] = { name: task.typeName, total: 0, hours: 0 };
                }
                const earnings = task.tariff > 0 ? task.actualTime * (task.tariff / task.estimatedTime) : 0;
                earningsByType[task.type].total += earnings;
                earningsByType[task.type].hours += task.actualTime;
            });
            
            container.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 20px;">
                    <div style="text-align: center;">
                        <div style="font-size: 0.85rem; color: var(--gray);">–û–±—â–µ–µ –≤—Ä–µ–º—è</div>
                        <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary);">${totalActual.toFixed(1)} —á</div>
                        <div style="font-size: 0.8rem; color: var(--gray);">–∏–∑ ${totalEstimated.toFixed(1)} —á</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 0.85rem; color: var(--gray);">–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</div>
                        <div style="font-size: 1.5rem; font-weight: bold; color: ${efficiency > 100 ? 'var(--success)' : efficiency > 80 ? 'var(--warning)' : 'var(--danger)'}">${efficiency}%</div>
                        <div style="font-size: 0.8rem; color: var(--gray);">–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 0.85rem; color: var(--gray);">–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è</div>
                        <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary);">${completedTasks.length > 0 ? (totalActual / completedTasks.length).toFixed(1) : 0} —á</div>
                        <div style="font-size: 0.8rem; color: var(--gray);">–Ω–∞ –∑–∞–¥–∞—á—É</div>
                    </div>
                </div>
                
                <h4 style="margin-bottom: 12px; font-size: 1rem;">üìä –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ç–∏–ø–∞–º –∑–∞–¥–∞—á</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 12px;">
                    ${Object.values(earningsByType).map(type => `
                        <div style="padding: 12px; background: #f8fafc; border-radius: 8px;">
                            <div style="font-weight: 500; font-size: 0.9rem; margin-bottom: 4px;">${type.name}</div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.85rem;">
                                <div>
                                    <span style="color: var(--gray);">–ß–∞—Å—ã:</span>
                                    <span style="font-weight: 500;">${type.hours.toFixed(1)}</span>
                                </div>
                                <div>
                                    <span style="color: var(--gray);">–°—É–º–º–∞:</span>
                                    <span style="font-weight: 500; color: var(--success);">${type.total.toFixed(0)} ‚ÇΩ</span>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }
        
        function showAddTaskModal() {
            // Set default dates
            const today = new Date().toISOString().split('T')[0];
            const nextWeek = new Date();
            nextWeek.setDate(nextWeek.getDate() + 7);
            const nextWeekStr = nextWeek.toISOString().split('T')[0];
            
            document.getElementById('new-task-start-date').value = today;
            document.getElementById('new-task-deadline').value = nextWeekStr;
            document.getElementById('new-task-title').value = '';
            document.getElementById('new-task-description').value = '';
            document.getElementById('new-task-estimated').value = '2';
            document.getElementById('new-task-priority').value = 'medium';
            document.getElementById('new-task-type').value = '';
            document.getElementById('task-tariff-info').textContent = '–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∑–∞–¥–∞—á–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–∞—Ä–∏—Ñ–∞';
            
            document.getElementById('add-task-modal').classList.remove('hidden');
        }
        
        function updateTaskType() {
            const taskType = document.getElementById('new-task-type').value;
            const tariffInfo = document.getElementById('task-tariff-info');
            
            if (taskType && taskTypeMapping[taskType]) {
                const taskInfo = taskTypeMapping[taskType];
                tariffInfo.innerHTML = `
                    <div>${taskInfo.name}</div>
                    <div>–¢–∞—Ä–∏—Ñ: ${taskInfo.rate === 0 ? '–ø–æ —Å–µ—Ç–∫–µ' : taskInfo.rate + ' ‚ÇΩ'}</div>
                `;
            } else {
                tariffInfo.textContent = '–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∑–∞–¥–∞—á–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–∞—Ä–∏—Ñ–∞';
            }
        }
        
        function saveNewTask() {
            const taskType = document.getElementById('new-task-type').value;
            const title = document.getElementById('new-task-title').value;
            const description = document.getElementById('new-task-description').value;
            const estimated = document.getElementById('new-task-estimated').value;
            const priority = document.getElementById('new-task-priority').value;
            const startDate = document.getElementById('new-task-start-date').value;
            const deadline = document.getElementById('new-task-deadline').value;
            
            if (!taskType || !title || !estimated) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
                return;
            }
            
            const taskInfo = taskTypeMapping[taskType];
            
            tasksData.push({
                id: tasksData.length + 1,
                type: taskType,
                typeName: taskInfo ? taskInfo.name : '–î—Ä—É–≥–∞—è –∑–∞–¥–∞—á–∞',
                title: title,
                description: description,
                estimatedTime: parseFloat(estimated),
                actualTime: 0,
                status: 'pending',
                priority: priority,
                startDate: startDate,
                endDate: null,
                deadline: deadline,
                tariff: taskInfo ? taskInfo.rate : 0,
                note: '–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞'
            });
            
            closeModal('add-task-modal');
            loadTasksData();
            alert('–ó–∞–¥–∞—á–∞ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞!');
        }
        
        function updateTaskTime(taskId, time) {
            const task = tasksData.find(t => t.id === taskId);
            if (task) {
                task.actualTime = parseFloat(time) || 0;
                loadTasksData();
            }
        }
        
        function startTask(taskId) {
            const task = tasksData.find(t => t.id === taskId);
            if (task) {
                task.status = 'in_progress';
                loadTasksData();
                alert('–ó–∞–¥–∞—á–∞ –Ω–∞—á–∞—Ç–∞!');
            }
        }
        
        function completeTask(taskId) {
            const task = tasksData.find(t => t.id === taskId);
            if (task) {
                task.status = 'completed';
                task.endDate = new Date().toISOString().split('T')[0];
                task.note = task.note || '–ó–∞–¥–∞—á–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞';
                loadTasksData();
                alert('–ó–∞–¥–∞—á–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!');
            }
        }
        
        // ========== COMPARISON FUNCTIONS ==========
        
        function loadComparison() {
            const role = document.getElementById('employee-role').value;
            const data = comparisonData[role] || comparisonData.reporter;
            
            // Load overview
            loadComparisonOverview(data);
            
            // Load ranking table
            loadRankingTable(data);
            
            // Load chart
            loadComparisonChart(data);
        }
        
        function loadComparisonOverview(data) {
            const currentUser = data.employees.find(e => e.isCurrent);
            if (!currentUser) return;
            
            const avgScore = data.employees.reduce((sum, e) => sum + e.score, 0) / data.employees.length;
            const normFactor = (currentUser.score / avgScore).toFixed(3);
            
            const container = document.getElementById('comparison-overview');
            if (!container) return;
            
            container.innerHTML = `
                <div class="kpi-card">
                    <div style="color: var(--gray); font-size: 0.85rem;">–í–∞—à–∏ –±–∞–ª–ª—ã</div>
                    <div class="kpi-value">${currentUser.score.toFixed(1)}</div>
                    <div class="kpi-trend trend-up">–í—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ</div>
                    <div style="font-size: 0.85rem; color: var(--gray);">+${(currentUser.score - avgScore).toFixed(1)} –∫ –Ω–æ—Ä–º–µ</div>
                </div>
                <div class="kpi-card">
                    <div style="color: var(--gray); font-size: 0.85rem;">–°—Ä–µ–¥–Ω–∏–µ –ø–æ –æ—Ç–¥–µ–ª—É</div>
                    <div class="kpi-value">${avgScore.toFixed(1)}</div>
                    <div class="kpi-trend trend-up">${data.employees.length} —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</div>
                    <div style="font-size: 0.85rem; color: var(--gray);">–†–∞–∑–±—Ä–æ—Å: ${Math.max(...data.employees.map(e => e.score)).toFixed(1)}-${Math.min(...data.employees.map(e => e.score)).toFixed(1)}</div>
                </div>
                <div class="kpi-card">
                    <div style="color: var(--gray); font-size: 0.85rem;">–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–æ—Ä–º.</div>
                    <div class="kpi-value">${normFactor}</div>
                    <div class="kpi-trend trend-up">–ù–∞ ${((normFactor - 1) * 100).toFixed(1)}% –≤—ã—à–µ</div>
                    <div style="font-size: 0.85rem; color: var(--gray);">${currentUser.score.toFixed(1)} / ${avgScore.toFixed(1)}</div>
                </div>
            `;
        }
        
        function loadRankingTable(data) {
            // Sort employees by score
            const sortedEmployees = [...data.employees].sort((a, b) => b.score - a.score);
            const avgScore = data.employees.reduce((sum, e) => sum + e.score, 0) / data.employees.length;
            
            const container = document.getElementById('ranking-table');
            if (!container) return;
            
            container.innerHTML = '';
            
            sortedEmployees.forEach((employee, index) => {
                const rank = index + 1;
                const normFactor = (employee.score / avgScore).toFixed(3);
                const variablePart = Math.round(30000 * normFactor);
                const totalSalary = 100000 + variablePart;
                
                const row = document.createElement('tr');
                if (employee.isCurrent) {
                    row.style.background = '#f0f9ff';
                }
                
                row.innerHTML = `
                    <td>
                        <div style="display: inline-flex; align-items: center; justify-content: center; width: 24px; height: 24px; 
                              background: ${rank <= 3 ? '#f59e0b' : '#e2e8f0'}; 
                              color: ${rank <= 3 ? 'white' : 'var(--dark)'}; border-radius: 50%; font-weight: bold; font-size: 0.8rem;">
                            ${rank}
                        </div>
                    </td>
                    <td>
                        <div style="font-weight: ${employee.isCurrent ? 'bold' : 'normal'}">
                            ${employee.name}
                            ${employee.isCurrent ? ' <span style="color: var(--primary);">(–í—ã)</span>' : ''}
                        </div>
                    </td>
                    <td>${employee.score.toFixed(1)}</td>
                    <td>${normFactor}</td>
                `;
                container.appendChild(row);
            });
        }
        
        function loadComparisonChart(data) {
            const container = document.getElementById('comparison-chart');
            if (!container) return;
            
            // Sort by score
            const sorted = [...data.employees].sort((a, b) => a.score - b.score);
            const maxScore = Math.max(...sorted.map(e => e.score));
            
            container.innerHTML = '';
            
            sorted.forEach(employee => {
                const height = (employee.score / maxScore) * 80 + 20;
                const bar = document.createElement('div');
                bar.style.display = 'flex';
                bar.style.flexDirection = 'column';
                bar.style.alignItems = 'center';
                bar.style.flex = '1';
                
                bar.innerHTML = `
                    <div style="height: ${height}px; width: 24px; background: ${employee.isCurrent ? 'var(--primary)' : '#94a3b8'}; 
                          border-radius: 4px 4px 0 0; position: relative;">
                        ${employee.isCurrent ? 
                            `<div style="position: absolute; top: -18px; left: 50%; transform: translateX(-50%); white-space: nowrap;
                                  background: var(--primary); color: white; padding: 1px 4px; border-radius: 3px;
                                  font-size: 0.7rem;">–í–´</div>` : ''}
                    </div>
                    <div style="margin-top: 6px; font-size: 0.75rem; font-weight: ${employee.isCurrent ? 'bold' : 'normal'}">
                        ${employee.name.split(' ')[0]}
                    </div>
                    <div style="font-size: 0.7rem; color: var(--gray);">
                        ${employee.score.toFixed(1)}
                    </div>
                `;
                
                container.appendChild(bar);
            });
        }
        
        // ========== ANALYST FUNCTIONS ==========
        
        function loadEfficiencyData() {
            const period = document.getElementById('efficiency-period').value;
            const data = efficiencyData[period] || efficiencyData.current;
            
            // Load efficiency table
            loadEfficiencyTable(data);
            
            // Load KPI analysis
            loadKPIAnalysis();
        }
        
        function loadEfficiencyTable(data) {
            const container = document.getElementById('efficiency-table');
            if (!container) return;
            
            container.innerHTML = '';
            
            data.departments.forEach(dept => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${dept.name}</strong></td>
                    <td>${dept.employees}</td>
                    <td>${dept.avgScore.toFixed(1)}</td>
                    <td>${dept.fund.toLocaleString()} ‚ÇΩ</td>
                    <td>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${dept.efficiency}%"></div>
                        </div>
                        <div style="text-align: center; font-size: 0.8rem; margin-top: 2px;">${dept.efficiency}%</div>
                    </td>
                    <td>
                        <span class="badge ${dept.profitability.includes('–í—ã—Å–æ–∫–∞—è') ? 'badge-success' : dept.profitability.includes('–û—á–µ–Ω—å') ? 'badge-success' : 'badge-warning'}">
                            ${dept.profitability}
                        </span>
                    </td>
                `;
                container.appendChild(row);
            });
        }
        
        function loadKPIAnalysis() {
            const container = document.getElementById('kpi-analysis-container');
            if (!container) return;
            
            container.innerHTML = `
                <div class="form-container">
                    <h3 style="margin-bottom: 12px; font-size: 1rem;">üìä –ê–Ω–∞–ª–∏–∑ KPI –ø–æ —Ä–æ–ª—è–º</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>–†–æ–ª—å</th>
                                <th>–°—Ä. –±–∞–ª–ª</th>
                                <th>–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ</th>
                                <th>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ</th>
                                <th>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>–†–µ–ø–æ—Ä—Ç—ë—Ä—ã</strong></td>
                                <td>102.4</td>
                                <td>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 85%"></div>
                                    </div>
                                </td>
                                <td>100-115 –±–∞–ª–ª–æ–≤</td>
                                <td>–£–≤–µ–ª–∏—á–∏—Ç—å —Ü–µ–ª–∏ –Ω–∞ 5%</td>
                            </tr>
                            <tr>
                                <td><strong>–†–µ–¥–∞–∫—Ç–æ—Ä—ã</strong></td>
                                <td>98.7</td>
                                <td>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 82%"></div>
                                    </div>
                                </td>
                                <td>95-105 –±–∞–ª–ª–æ–≤</td>
                                <td>–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã</td>
                            </tr>
                            <tr>
                                <td><strong>SMM</strong></td>
                                <td>105.2</td>
                                <td>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 91%"></div>
                                    </div>
                                </td>
                                <td>95-120 –±–∞–ª–ª–æ–≤</td>
                                <td>–ü–æ–≤—ã—Å–∏—Ç—å –ø–ª–∞–Ω –ø–æ UGC</td>
                            </tr>
                            <tr>
                                <td><strong>–ü—Ä–æ–¥–∞–∫—à–Ω</strong></td>
                                <td>99.5</td>
                                <td>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 78%"></div>
                                    </div>
                                </td>
                                <td>90-110 –±–∞–ª–ª–æ–≤</td>
                                <td>–°–Ω–∏–∑–∏—Ç—å –≤—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ–µ–≤</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            `;
        }
        
        function loadForecastData() {
            const period = document.getElementById('forecast-period').value;
            const data = forecastData[period] || forecastData.next;
            
            // Load forecast table
            loadForecastTable(data);
        }
        
        function loadForecastTable(data) {
            const container = document.getElementById('forecast-table');
            if (!container) return;
            
            container.innerHTML = '';
            
            data.departments.forEach(dept => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${dept.name}</strong></td>
                    <td>${dept.score.toFixed(1)}</td>
                    <td>${dept.efficiency}%</td>
                    <td>${dept.fund.toLocaleString()} ‚ÇΩ</td>
                    <td>
                        <span class="kpi-trend trend-up" style="font-size: 0.75rem;">
                            ‚Üë –†–æ—Å—Ç –Ω–∞ ${(dept.efficiency - 80)}%
                        </span>
                    </td>
                `;
                container.appendChild(row);
            });
        }
        
        // ========== ADMIN FUNCTIONS ==========
        
        function selectRoleForAdmin(role) {
            adminSelectedRole = role;
            
            // Update buttons
            document.querySelectorAll('#admin-kpi .btn-secondary').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Load KPI for selected role
            loadAdminKPI();
        }
        
        function loadAdminKPI() {
            const config = roleConfigs[adminSelectedRole];
            
            // Update salary inputs
            document.getElementById('admin-base-salary').value = config.baseSalary;
            document.getElementById('admin-variable-salary').value = config.variablePart;
            document.getElementById('admin-max-penalty').value = config.maxPenaltyPercent;
            
            // Load KPI table
            const container = document.getElementById('admin-kpi-table');
            if (!container) return;
            
            container.innerHTML = '';
            
            config.kpis.forEach((kpi, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <div style="font-weight: 500; font-size: 0.9rem;">${kpi.name}</div>
                        <div style="font-size: 0.8rem; color: var(--gray);">${kpi.unit}</div>
                    </td>
                    <td>${kpi.target}</td>
                    <td>${kpi.weight}%</td>
                    <td>
                        <div style="font-size: 0.8rem; color: var(--gray);">${kpi.formula}</div>
                    </td>
                    <td>120</td>
                    <td>
                        <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 0.8rem;" onclick="editKPI(${index})">
                            ‚úèÔ∏è
                        </button>
                        <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 0.8rem; margin-left: 4px;" onclick="deleteKPI(${index})">
                            üóëÔ∏è
                        </button>
                    </td>
                `;
                container.appendChild(row);
            });
        }
        
        function saveSalarySettings() {
            const config = roleConfigs[adminSelectedRole];
            
            config.baseSalary = parseInt(document.getElementById('admin-base-salary').value);
            config.variablePart = parseInt(document.getElementById('admin-variable-salary').value);
            config.maxPenaltyPercent = parseInt(document.getElementById('admin-max-penalty').value);
            
            alert(`–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ó–ü –¥–ª—è —Ä–æ–ª–∏ "${config.name}" —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!`);
        }
        
        function showAddKPIModal() {
            document.getElementById('add-kpi-modal').classList.remove('hidden');
        }
        
        function saveNewKPI() {
            const name = document.getElementById('new-kpi-name').value;
            const target = document.getElementById('new-kpi-target').value;
            const weight = document.getElementById('new-kpi-weight').value;
            const unit = document.getElementById('new-kpi-unit').value;
            const formula = document.getElementById('new-kpi-formula').value;
            
            if (!name || !target || !weight) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
                return;
            }
            
            const config = roleConfigs[adminSelectedRole];
            config.kpis.push({
                name: name,
                target: parseFloat(target),
                weight: parseInt(weight),
                unit: unit,
                fact: 0,
                formula: formula === 'simple' ? '(–§–∞–∫—Ç / –¶–µ–ª—å) √ó 100' : 
                         formula === 'reverse' ? '(–¶–µ–ª—å / –§–∞–∫—Ç) √ó 100' : '–§–∞–∫—Ç'
            });
            
            closeModal('add-kpi-modal');
            loadAdminKPI();
            alert('KPI —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!');
        }
        
        function editKPI(index) {
            alert(`–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ KPI ${index + 1} - —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏`);
        }
        
        function deleteKPI(index) {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç KPI?')) {
                const config = roleConfigs[adminSelectedRole];
                config.kpis.splice(index, 1);
                loadAdminKPI();
                alert('KPI —É–¥–∞–ª—ë–Ω!');
            }
        }
        
        function loadPenaltiesData() {
            // Update statistics
            const totalPenalties = penaltiesData.length;
            const totalAmount = penaltiesData.reduce((sum, p) => sum + p.amount, 0);
            
            document.getElementById('total-penalties').textContent = totalPenalties;
            document.getElementById('total-penalties-amount').textContent = totalAmount.toLocaleString() + ' ‚ÇΩ';
            
            // Load penalties table
            const container = document.getElementById('penalties-table');
            if (!container) return;
            
            container.innerHTML = '';
            
            penaltiesData.forEach(penalty => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${penalty.employee}</td>
                    <td>${penalty.role}</td>
                    <td>${penalty.type}</td>
                    <td><span style="color: var(--danger); font-weight: bold;">${penalty.amount.toLocaleString()} ‚ÇΩ</span></td>
                    <td>${penalty.date}</td>
                    <td>
                        <div style="font-size: 0.8rem; color: var(--gray); max-width: 200px; overflow: hidden; text-overflow: ellipsis;">
                            ${penalty.reason}
                        </div>
                    </td>
                    <td>
                        <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 0.8rem;" onclick="editPenalty(${penalty.id})">
                            ‚úèÔ∏è
                        </button>
                        <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 0.8rem; margin-left: 4px;" onclick="deletePenalty(${penalty.id})">
                            üóëÔ∏è
                        </button>
                    </td>
                `;
                container.appendChild(row);
            });
        }
        
        function showAddPenaltyModal() {
            document.getElementById('add-penalty-modal').classList.remove('hidden');
        }
        
        function saveNewPenalty() {
            const employee = document.getElementById('penalty-employee').value;
            const type = document.getElementById('penalty-type').value;
            const amount = document.getElementById('penalty-amount').value;
            const reason = document.getElementById('penalty-reason').value;
            
            if (!employee || !amount || !reason) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
                return;
            }
            
            const employeeName = document.querySelector(`#penalty-employee option[value="${employee}"]`).textContent;
            
            penaltiesData.push({
                id: penaltiesData.length + 1,
                employee: employeeName,
                role: employeeName.includes('–†–µ–ø–æ—Ä—Ç—ë—Ä') ? '–†–µ–ø–æ—Ä—Ç—ë—Ä' : 
                      employeeName.includes('SMM') ? 'SMM' : '–†–µ–¥–∞–∫—Ç–æ—Ä',
                type: type,
                amount: parseInt(amount),
                date: new Date().toISOString().split('T')[0],
                reason: reason
            });
            
            closeModal('add-penalty-modal');
            loadPenaltiesData();
            alert('–®—Ç—Ä–∞—Ñ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!');
        }
        
        function editPenalty(id) {
            alert(`–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à—Ç—Ä–∞—Ñ–∞ ${id} - —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏`);
        }
        
        function deletePenalty(id) {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —à—Ç—Ä–∞—Ñ?')) {
                const index = penaltiesData.findIndex(p => p.id === id);
                if (index > -1) {
                    penaltiesData.splice(index, 1);
                    loadPenaltiesData();
                    alert('–®—Ç—Ä–∞—Ñ —É–¥–∞–ª—ë–Ω!');
                }
            }
        }
        
        // ========== REFERENCE FUNCTIONS ==========
        
        function showReferenceTab(tabName) {
            currentReferenceTab = tabName;
            
            // Update buttons
            document.querySelectorAll('#admin-reference .btn-secondary').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Show selected tab
            document.getElementById('tariffs-tab').classList.add('hidden');
            document.getElementById('employees-tab').classList.add('hidden');
            document.getElementById('products-tab').classList.add('hidden');
            document.getElementById(tabName + '-tab').classList.remove('hidden');
            
            // Load data for tab
            if (tabName === 'tariffs') {
                loadTariffsData();
            } else if (tabName === 'employees') {
                loadEmployeesData();
            } else if (tabName === 'products') {
                loadProductsData();
            }
        }
        
        function loadReferenceData() {
            // Load tariffs data by default
            loadTariffsData();
        }
        
        function loadTariffsData() {
            // Update statistics
            const totalTariffs = tariffsData.length;
            const avgRate = Math.round(tariffsData.reduce((sum, t) => sum + (t.rate || 0), 0) / totalTariffs);
            
            document.getElementById('total-work-types').textContent = totalTariffs;
            document.getElementById('avg-tariff').textContent = avgRate.toLocaleString() + ' ‚ÇΩ';
            
            // Load tariffs table
            const container = document.getElementById('tariffs-table');
            if (!container) return;
            
            container.innerHTML = '';
            
            tariffsData.forEach(tariff => {
                const row = document.createElement('tr');
                
                // Format rate display
                let rateDisplay;
                if (tariff.rate === 0) {
                    rateDisplay = '<span style="color: var(--gray); font-style: italic;">–ø–æ —Å–µ—Ç–∫–µ</span>';
                } else if (tariff.rate < 1) {
                    rateDisplay = `${tariff.rate} (–∫–æ—ç—Ñ.)`;
                } else {
                    rateDisplay = `${tariff.rate.toLocaleString()} ‚ÇΩ`;
                }
                
                row.innerHTML = `
                    <td>
                        <div style="font-weight: 500; font-size: 0.9rem;">${tariff.name}</div>
                    </td>
                    <td>
                        <span class="tariff-type-badge">${tariff.type === 'basic' ? '–û—Å–Ω–æ–≤–Ω–∞—è' : tariff.type === 'additional' ? '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è' : '–°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è'}</span>
                    </td>
                    <td>${tariff.level}</td>
                    <td>
                        <div style="font-weight: bold; color: var(--primary);">${rateDisplay}</div>
                    </td>
                    <td>
                        <div style="font-size: 0.8rem; color: var(--gray);">${tariff.note || '-'}</div>
                    </td>
                    <td>
                        <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 0.8rem;" onclick="editTariff(${tariff.id})">
                            ‚úèÔ∏è
                        </button>
                        <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 0.8rem; margin-left: 4px;" onclick="deleteTariff(${tariff.id})">
                            üóëÔ∏è
                        </button>
                    </td>
                `;
                container.appendChild(row);
            });
        }
        
        function loadEmployeesData() {
            // Update statistics
            document.getElementById('total-employees').textContent = employeesData.length;
            
            // Load employees table
            const container = document.getElementById('employees-table');
            if (!container) return;
            
            container.innerHTML = '';
            
            employeesData.forEach(employee => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <div style="font-weight: 500; font-size: 0.9rem;">${employee.name}</div>
                    </td>
                    <td>${employee.position}</td>
                    <td>${employee.department}</td>
                    <td>${employee.hireDate}</td>
                    <td>${employee.salary.toLocaleString()} ‚ÇΩ</td>
                    <td>
                        <span class="badge badge-success">–ê–∫—Ç–∏–≤–µ–Ω</span>
                    </td>
                    <td>
                        <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 0.8rem;" onclick="editEmployee(${employee.id})">
                            ‚úèÔ∏è
                        </button>
                        <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 0.8rem; margin-left: 4px;" onclick="deleteEmployee(${employee.id})">
                            üóëÔ∏è
                        </button>
                    </td>
                `;
                container.appendChild(row);
            });
        }
        
        function loadProductsData() {
            // Load products table
            const container = document.getElementById('products-table');
            if (!container) return;
            
            container.innerHTML = '';
            
            productsData.forEach(product => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <div style="font-weight: 500; font-size: 0.9rem;">${product.name}</div>
                    </td>
                    <td>${product.category}</td>
                    <td>
                        <div style="font-size: 0.85rem; color: var(--gray);">${product.description}</div>
                    </td>
                    <td>
                        <span class="badge ${product.complexity === '–ù–∏–∑–∫–∞—è' ? 'badge-success' : product.complexity === '–°—Ä–µ–¥–Ω—è—è' ? 'badge-warning' : 'badge-danger'}">
                            ${product.complexity}
                        </span>
                    </td>
                    <td>
                        <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 0.8rem;" onclick="editProduct(${product.id})">
                            ‚úèÔ∏è
                        </button>
                        <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 0.8rem; margin-left: 4px;" onclick="deleteProduct(${product.id})">
                            üóëÔ∏è
                        </button>
                    </td>
                `;
                container.appendChild(row);
            });
        }
        
        function selectTariffCategory(category) {
            selectedTariffCategory = category;
            
            // Update buttons
            document.querySelectorAll('.tariff-category-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }
        
        function showAddTariffModal() {
            document.getElementById('add-tariff-modal').classList.remove('hidden');
        }
        
        function saveNewTariff() {
            const name = document.getElementById('new-tariff-name').value;
            const type = document.getElementById('new-tariff-type').value;
            const level = document.getElementById('new-tariff-level').value;
            const rate = document.getElementById('new-tariff-rate').value;
            const unit = document.getElementById('new-tariff-unit').value;
            const note = document.getElementById('new-tariff-note').value;
            
            if (!name || rate === '') {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
                return;
            }
            
            tariffsData.push({
                id: tariffsData.length + 1,
                name: name,
                type: type,
                level: parseInt(level),
                rate: parseFloat(rate),
                unit: unit,
                note: note,
                category: selectedTariffCategory
            });
            
            closeModal('add-tariff-modal');
            loadTariffsData();
            alert('–¢–∞—Ä–∏—Ñ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!');
        }
        
        function editTariff(id) {
            const tariff = tariffsData.find(t => t.id === id);
            if (tariff) {
                alert(`–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞: ${tariff.name}\n\n–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏.`);
            }
        }
        
        function deleteTariff(id) {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ç–∞—Ä–∏—Ñ?')) {
                const index = tariffsData.findIndex(t => t.id === id);
                if (index > -1) {
                    tariffsData.splice(index, 1);
                    loadTariffsData();
                    alert('–¢–∞—Ä–∏—Ñ —É–¥–∞–ª—ë–Ω!');
                }
            }
        }
        
        function showAddEmployeeModal() {
            document.getElementById('add-employee-modal').classList.remove('hidden');
        }
        
        function saveNewEmployee() {
            const lastName = document.getElementById('new-employee-lastname').value;
            const firstName = document.getElementById('new-employee-firstname').value;
            const department = document.getElementById('new-employee-department').value;
            const position = document.getElementById('new-employee-position').value;
            const hireDate = document.getElementById('new-employee-hiredate').value;
            const salary = document.getElementById('new-employee-salary').value;
            const rate = document.getElementById('new-employee-rate').value;
            
            if (!lastName || !firstName || !department || !position || !hireDate || !salary) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
                return;
            }
            
            const departmentName = department === 'news' ? '–ù–æ–≤–æ—Å—Ç–Ω–æ–π –æ—Ç–¥–µ–ª' : 
                                  department === 'production' ? '–ü—Ä–æ–¥–∞–∫—à–Ω' :
                                  department === 'editing' ? '–†–µ–¥–∞–∫—Ü–∏—è' :
                                  department === 'creative' ? '–¢–≤–æ—Ä—á–µ—Å–∫–∏–π –æ—Ç–¥–µ–ª' : 'SMM';
            
            employeesData.push({
                id: employeesData.length + 1,
                name: `${lastName} ${firstName}`,
                position: position,
                department: departmentName,
                hireDate: hireDate,
                salary: parseInt(salary),
                status: 'active'
            });
            
            closeModal('add-employee-modal');
            loadEmployeesData();
            alert('–°–æ—Ç—Ä—É–¥–Ω–∏–∫ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!');
        }
        
        function editEmployee(id) {
            const employee = employeesData.find(e => e.id === id);
            if (employee) {
                alert(`–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: ${employee.name}\n\n–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏.`);
            }
        }
        
        function deleteEmployee(id) {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞?')) {
                const index = employeesData.findIndex(e => e.id === id);
                if (index > -1) {
                    employeesData.splice(index, 1);
                    loadEmployeesData();
                    alert('–°–æ—Ç—Ä—É–¥–Ω–∏–∫ —É–¥–∞–ª—ë–Ω!');
                }
            }
        }
        
        function editProduct(id) {
            const product = productsData.find(p => p.id === id);
            if (product) {
                alert(`–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ –ø—Ä–æ–¥—É–∫—Ç–∞: ${product.name}\n\n–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏.`);
            }
        }
        
        function deleteProduct(id) {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ç–∏–ø –ø—Ä–æ–¥—É–∫—Ç–∞?')) {
                const index = productsData.findIndex(p => p.id === id);
                if (index > -1) {
                    productsData.splice(index, 1);
                    loadProductsData();
                    alert('–¢–∏–ø –ø—Ä–æ–¥—É–∫—Ç–∞ —É–¥–∞–ª—ë–Ω!');
                }
            }
        }
        
        function selectReportType(type) {
            selectedReportType = type;
            
            // Update UI
            document.querySelectorAll('#admin-reports .kpi-card').forEach(card => {
                card.style.boxShadow = '0 1px 3px rgba(0,0,0,0.05)';
            });
            event.currentTarget.style.boxShadow = '0 0 0 2px var(--primary)';
            
            alert(`–í—ã–±—Ä–∞–Ω –æ—Ç—á—ë—Ç —Ç–∏–ø–∞: ${type === 'salary' ? '–ü–æ –ó–ü' : type === 'kpi' ? '–ü–æ KPI' : '–ü–æ –æ—Ç–¥–µ–ª–∞–º'}`);
        }
        
        function generateReport() {
            const period = document.getElementById('report-period').value;
            const format = document.getElementById('report-format').value;
            
            alert(`–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞ "${selectedReportType}" –∑–∞ –ø–µ—Ä–∏–æ–¥ "${period}" –≤ —Ñ–æ—Ä–º–∞—Ç–µ "${format.toUpperCase()}"\n\n–û—Ç—á—ë—Ç –±—É–¥–µ—Ç —Å–∫–∞—á–∞–Ω –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ–∫—É–Ω–¥.`);
        }
        
        // ========== MODAL FUNCTIONS ==========
        
        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }
        
        // ========== INITIALIZATION ==========
        
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the app
            loadRoleData();
        });
    </script>
</body>
</html>
